import{l as J,r as t,j as e,y as o,ac as K,B as d,aV as Q,aW as Z,aX as ee,C as g,a as I,b as k,c as D,d as f,al as se,am as ae,an as le,ao as ne,ar as A,aE as z,ap as ie,k as S,aL as b}from"./client-CMvCw2jp.js";import{D as O,a as te,b as R,d as L,f as E,c as re,e as de}from"./dialog-idyyqogp.js";import{C as ce}from"./checkbox-DmFmSC3J.js";import{T as H}from"./trash-2-P1aG3-jx.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=J("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),G=t.forwardRef(({className:i,...n},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:o("w-full caption-bottom text-sm",i),...n})}));G.displayName="Table";const F=t.forwardRef(({className:i,...n},l)=>e.jsx("thead",{ref:l,className:o("[&_tr]:border-b",i),...n}));F.displayName="TableHeader";const U=t.forwardRef(({className:i,...n},l)=>e.jsx("tbody",{ref:l,className:o("[&_tr:last-child]:border-0",i),...n}));U.displayName="TableBody";const me=t.forwardRef(({className:i,...n},l)=>e.jsx("tfoot",{ref:l,className:o("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",i),...n}));me.displayName="TableFooter";const N=t.forwardRef(({className:i,...n},l)=>e.jsx("tr",{ref:l,className:o("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",i),...n}));N.displayName="TableRow";const m=t.forwardRef(({className:i,...n},l)=>e.jsx("th",{ref:l,className:o("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",i),...n}));m.displayName="TableHead";const x=t.forwardRef(({className:i,...n},l)=>e.jsx("td",{ref:l,className:o("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",i),...n}));x.displayName="TableCell";const xe=t.forwardRef(({className:i,...n},l)=>e.jsx("caption",{ref:l,className:o("mt-4 text-sm text-muted-foreground",i),...n}));xe.displayName="TableCaption";const he=({viewMode:i,onChange:n})=>e.jsxs("div",{className:"border rounded-md p-1 flex",children:[e.jsxs(d,{variant:i==="grid"?"default":"ghost",size:"sm",className:"rounded-sm",onClick:()=>n("grid"),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-0.5 h-3 w-3 mr-2",children:[e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"})]}),"Grid"]}),e.jsxs(d,{variant:i==="table"?"default":"ghost",size:"sm",className:"rounded-sm",onClick:()=>n("table"),children:[e.jsxs("div",{className:"flex flex-col justify-between h-3 w-3 mr-2",children:[e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"}),e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"}),e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"})]}),"Table"]})]}),P=[{id:"gpt-4o",name:"GPT-4o",enabled:!0},{id:"gpt-4o-mini",name:"GPT-4o Mini",enabled:!0},{id:"claude-3.5-sonnet",name:"Claude 3.5 Sonnet",enabled:!1},{id:"claude-3-opus",name:"Claude 3 Opus",enabled:!1},{id:"claude-3-haiku",name:"Claude 3 Haiku",enabled:!1},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",enabled:!1},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",enabled:!1}],fe=function(){const{data:n}=K(),l=n,[h,B]=t.useState([]),[$,u]=t.useState(!1),[Y,p]=t.useState(!1),[j,V]=t.useState(null),[v,y]=t.useState(!1),[w,_]=t.useState("grid"),C=t.useMemo(()=>{const s=l?.members.map(r=>({id:r.id,invitationId:void 0,email:r.user.email,name:r.user.name,status:"accepted",role:r.role,models:P})),c=l?.invitations.filter(r=>r.status==="pending")?.map(r=>({id:void 0,invitationId:r.id,email:r.email,name:r.email.split("@")[0]??"Unkown Name",status:r.status,role:r.role,models:P}));return[...s??[],...c??[]]},[l]),W=async()=>{const s=h.filter(a=>l.invitations.some(c=>c.email.toLowerCase()===a.email.toLowerCase()&&c.status==="pending")||l.members.some(c=>c.user.email.toLowerCase()===a.email.toLowerCase()));if(s.length>0){let a=s.map(c=>c.email+", ").toString();a=a.substring(0,a.length-2),S.error(`You have already invited ${a}.`);return}y(!0),await Promise.all(h.map(async a=>{await b.inviteMember({email:a.email,role:a.role,organizationId:l.id})})),S.success(`${h.length} new invitations have been sent succesfully - wait for their acceptantance.`),y(!1),u(!1)},M=async(s,a)=>{s&&!a?await b.removeMember({memberIdOrEmail:s,organizationId:l.id}):a&&await b.cancelInvitation({invitationId:a})},X=s=>{},q=()=>{},T=s=>{V({...s}),p(!0)};return l?e.jsxs("div",{className:"space-y-6 m-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[l?.name+" - "," Team Members"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your organization's team members and their permissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{viewMode:w,onChange:_}),e.jsxs(O,{open:$,onOpenChange:u,children:[e.jsx(te,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Invite Member"]})}),e.jsxs(R,{className:"min-w-1/3 flex flex-col items-center",children:[e.jsx(L,{className:"text-center",children:"Invite new members"}),e.jsx(Z,{invitees:h,setInvitees:B}),e.jsxs(E,{children:[e.jsx(d,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(d,{onClick:W,disabled:h.length===0||v,children:v?"Sending...":"Send Invitation"})]})]})]})]})]}),e.jsx(O,{open:Y,onOpenChange:p,children:e.jsxs(R,{className:"sm:max-w-md",children:[e.jsxs(re,{children:[e.jsx(L,{children:"AI Model Access"}),e.jsxs(de,{children:["Configure which AI models ",j?.name," can access"]})]}),e.jsx("div",{className:"space-y-4 py-2 max-h-[60vh] overflow-y-auto",children:j?.models.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:`model-${s.id}`,checked:s.enabled,onCheckedChange:()=>X(s.id)}),e.jsx(ee,{htmlFor:`model-${s.id}`,className:"cursor-pointer",children:s.name})]}),s.enabled?e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Enabled"}):e.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full",children:"Disabled"})]},s.id))}),e.jsxs(E,{children:[e.jsx(d,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(d,{onClick:q,children:"Save Changes"})]})]})}),w==="grid"?e.jsxs(g,{children:[e.jsxs(I,{children:[e.jsx(k,{children:"Team Members"}),e.jsxs(D,{children:["Your organization has ",l.members.length," members"]})]}),e.jsx(f,{children:e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 lg:grid-cols-3",children:C.map(s=>e.jsx(g,{className:"overflow-hidden border bg-background",children:e.jsx(f,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-primary",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.name," - ",s.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s.role}),s.status==="pending"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-0.5 rounded-full",children:"Pending"})]})]})]}),e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"icon",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Menu"})]})}),e.jsxs(le,{align:"end",children:[e.jsx(ne,{children:"Actions"}),e.jsxs(A,{onClick:()=>T(s),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Configure AI Models"]}),e.jsx(ie,{}),e.jsxs(A,{className:"text-destructive",onClick:()=>M(s.email,s.invitationId),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),s.status==="accepted"?"Remove Member":"Cancel invitation"]})]})]})]}),e.jsxs("div",{className:"border-t p-4 bg-muted/40",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"AI Models"}),e.jsxs("span",{className:"text-xs font-medium",children:[s.models.filter(a=>a.enabled).length," of ",s.models.length," enabled"]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.models.filter(a=>a.enabled).slice(0,3).map(a=>e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:a.name},a.id)),s.models.filter(a=>a.enabled).length>3&&e.jsxs("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:["+",s.models.filter(a=>a.enabled).length-3," more"]}),s.models.filter(a=>a.enabled).length===0&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"No models enabled"})]})]})]})})},s.email))})})]}):e.jsxs(g,{children:[e.jsxs(I,{children:[e.jsx(k,{children:"Team Members"}),e.jsxs(D,{children:["Your organization has ",l.members.length," members"]})]}),e.jsx(f,{children:e.jsxs(G,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Role"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"AI Models"}),e.jsx(m,{className:"text-right",children:"Actions"})]})}),e.jsx(U,{children:C.map(s=>e.jsxs(N,{children:[e.jsx(x,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary text-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("span",{children:[s.name," - ",s.email]})]})}),e.jsx(x,{children:s.role}),e.jsx(x,{children:s.status==="accepted"?e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-600 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-600 mr-1"}),"Pending"]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.models.filter(a=>a.enabled).length}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"enabled"})]})}),e.jsx(x,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>T(s),children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Configure AI Models"})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>M(s.email,s.invitationId),children:[e.jsx(H,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},s.id))})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-pulse",children:"Loading..."})})};export{fe as component};
