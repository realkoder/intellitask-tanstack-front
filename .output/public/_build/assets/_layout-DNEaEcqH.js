import{l as se,r as n,j as e,P as Z,y as A,z as qt,T as _e,B as W,D as Kt,E as Wt,F as Ht,H as Gt,J as Yt,K as ot,N as Xt,O as Ue,Q as Ve,V as qe,u as Ke,W as ce,Y as Zt,Z as ct,_ as Jt,t as dt,$ as Qt,a0 as ea,a1 as We,a2 as He,a3 as Me,a4 as he,a5 as ta,a6 as aa,a7 as sa,a8 as ra,a9 as we,aa as X,ab as Ee,ac as na,ad as ia,k as fe,ae as Je,af as Re,ag as Qe,ah as Y,g as et,ai as Ie,X as la,w as oa,aj as ca,ak as ut,al as mt,am as ht,an as xt,ao as da,ap as ke,aq as $e,ar as H,S as ua,as as ma,at as Te,au as Ge,av as ha,aw as De,ax as xa,ay as pa,az as fa,aA as ga,aB as ja,L as ge,aC as va,aD as ba,U as wa,aE as Na,aF as pt,aG as ft,aH as gt,aI as jt,aJ as vt}from"./client-CMvCw2jp.js";import{B as Pe,S as ya,A as xe,a as tt,b as at,c as Ca}from"./avatar-DxhaIZ2w.js";import{F as Sa}from"./folder-open-mEKpUj5E.js";import{D as Ia,a as ka,b as Ta,c as Ma,d as Ea,e as Aa,f as Ra,g as Da}from"./dialog-idyyqogp.js";import{C as st}from"./checkbox-DmFmSC3J.js";import{P as Pa}from"./plus-sBaVN3vY.js";import{C as Oa}from"./circle-plus-Cu8ULUag.js";import{u as za}from"./useSignOut-o9qTHLdH.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=se("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=se("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=se("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var Ka="Separator",rt="horizontal",Wa=["horizontal","vertical"],bt=n.forwardRef((t,a)=>{const{decorative:s,orientation:d=rt,...l}=t,m=Ha(d)?d:rt,h=s?{role:"none"}:{"aria-orientation":m==="vertical"?m:void 0,role:"separator"};return e.jsx(Z.div,{"data-orientation":m,...h,...l,ref:a})});bt.displayName=Ka;function Ha(t){return Wa.includes(t)}var Ga=bt;function Ye({className:t,orientation:a="horizontal",decorative:s=!0,...d}){return e.jsx(Ga,{"data-slot":"separator-root",decorative:s,orientation:a,className:A("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...d})}const Ya="sidebar_state",Xa=60*60*24*7,Za="16rem",Ja="18rem",Qa="3rem",es="b",wt=n.createContext(null);function Ne(){const t=n.useContext(wt);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const Xe=n.forwardRef(({defaultOpen:t=!0,open:a,onOpenChange:s,className:d,style:l,children:m,...u},h)=>{const b=qt(),[o,w]=n.useState(!1),[g,y]=n.useState(t),p=a??g,N=n.useCallback(R=>{const D=typeof R=="function"?R(p):R;s?s(D):y(D),document.cookie=`${Ya}=${D}; path=/; max-age=${Xa}`},[s,p]),M=n.useCallback(()=>b?w(R=>!R):N(R=>!R),[b,N,w]);n.useEffect(()=>{const R=D=>{D.key===es&&(D.metaKey||D.ctrlKey)&&(D.preventDefault(),M())};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[M]);const C=p?"expanded":"collapsed",_=n.useMemo(()=>({state:C,open:p,setOpen:N,isMobile:b,openMobile:o,setOpenMobile:w,toggleSidebar:M}),[C,p,N,b,o,w,M]);return e.jsx(wt.Provider,{value:_,children:e.jsx(_e,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Za,"--sidebar-width-icon":Qa,...l},className:A("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",d),ref:h,...u,children:m})})})});Xe.displayName="SidebarProvider";function ts({side:t="left",variant:a="sidebar",collapsible:s="offcanvas",className:d,children:l,...m}){const{isMobile:u,state:h,openMobile:b,setOpenMobile:o}=Ne();return s==="none"?e.jsx("div",{"data-slot":"sidebar",className:A("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",d),...m,children:l}):u?e.jsxs(Kt,{open:b,onOpenChange:o,...m,children:[e.jsxs(Wt,{className:"sr-only",children:[e.jsx(Ht,{children:"Sidebar"}),e.jsx(Gt,{children:"Displays the mobile sidebar."})]}),e.jsx(Yt,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Ja},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:l})})]}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":h,"data-collapsible":h==="collapsed"?s:"","data-variant":a,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{className:A("relative h-svh w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{className:A("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",d),...m,children:e.jsx("div",{"data-sidebar":"sidebar",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:l})})]})}function Nt({className:t,onClick:a,...s}){const{toggleSidebar:d}=Ne();return e.jsxs(W,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:A("h-7 w-7",t),onClick:l=>{a?.(l),d()},...s,children:[e.jsx(Va,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function as({className:t,...a}){const{toggleSidebar:s}=Ne();return e.jsx("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:s,title:"Toggle Sidebar",className:A("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...a})}function yt({className:t,...a}){return e.jsx("main",{"data-slot":"sidebar-inset",className:A("bg-background relative flex min-h-svh flex-1 flex-col","peer-data-[variant=inset]:min-h-[calc(100svh-(--spacing(4)))] md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...a})}function ss({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:A("flex flex-col gap-2 p-2",t),...a})}function rs({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:A("flex flex-col gap-2 p-2",t),...a})}function ns({className:t,...a}){return e.jsx(Ye,{"data-slot":"sidebar-separator","data-sidebar":"separator",className:A("bg-sidebar-border mx-2 w-auto",t),...a})}function is({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:A("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a})}function je({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:A("relative flex w-full min-w-0 flex-col p-2",t),...a})}function ve({className:t,asChild:a=!1,...s}){const d=a?ot:"div";return e.jsx(d,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:A("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...s})}function de({className:t,...a}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:A("flex w-full min-w-0 flex-col gap-1",t),...a})}function ie({className:t,...a}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:A("group/menu-item relative",t),...a})}const ls=Xt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function le({asChild:t=!1,isActive:a=!1,variant:s="default",size:d="default",tooltip:l,className:m,...u}){const h=t?ot:"button",{isMobile:b,state:o}=Ne(),w=e.jsx(h,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":d,"data-active":a,className:A(ls({variant:s,size:d}),m),...u});return l?(typeof l=="string"&&(l={children:l}),e.jsxs(Ue,{children:[e.jsx(Ve,{asChild:!0,children:w}),e.jsx(qe,{side:"right",align:"center",hidden:o!=="collapsed"||b,...l})]})):w}function os({items:t,className:a}){const s=Ke(),[d,l]=ce(Qt),[m,u]=ce(ea),[h,b]=n.useState(!1),[o,w]=n.useState(null),[g,y]=ce(We),[p,N]=ce(He),[M,C]=ce(Me);n.useEffect(()=>{if(p){const c=t.find(j=>j.projects?.find(I=>I.id===p));c&&((!g||g!==c.id)&&y(c.id),l(j=>({...j,[c.id]:!0})))}},[p,t,y,g]),n.useEffect(()=>{if(M?.projectId){const c=M.projectId;let j;for(const I of t){const O=I.projects?.find(L=>L.id===c);if(O){j=O,(!g||g!==I.id)&&y(I.id),l(L=>({...L,[I.id]:!0}));break}}j&&(!p||p!==j.id)&&N(j.id),j&&u(I=>({...I,[j.id]:!0}))}},[M,t,y,N,g,p]);const _=c=>{l(j=>({...j,[c.id]:!j[c.id]})),(!g||g!==c.id)&&(y(c.id),p&&p!==c.id&&(N(void 0),C(void 0)))},R=c=>{y(c.id),p&&p!==c.id&&(N(void 0),C(void 0)),s({to:"/teamspace/$teamspaceId",params:{teamspaceId:c.id},viewTransition:!0})},D=c=>{if(u(j=>({...j,[c.id]:!j[c.id]})),!g||g!==c.teamspaceId){const j=t.find(I=>I.id===c.teamspaceId);j&&(y(j.id),l(I=>({...I,[j.id]:!0})))}N(c.id),M&&M.projectId!==c.id&&C(void 0),s({to:"/project/$projectId",params:{projectId:c.id},viewTransition:!0})},B=c=>{if(c.projectId){let j;for(const I of t){const O=I.projects?.find(L=>L.id===c.projectId);if(O){j=O,(!g||g!==I.id)&&y(I.id);break}}j&&N(j.id)}C(c),s({to:"/chat/$chatroomId",params:{chatroomId:c.id},viewTransition:!0})},z=()=>{b(!h)},E=c=>{w(c.id),b(!1),R(c)},P=(c,j=2)=>{const I=M?.id===c.id,O=j*12;return e.jsx("div",{children:e.jsx(ie,{children:e.jsxs(le,{className:"w-full justify-start hover:bg-accent/50",onClick:()=>B(c),style:{paddingLeft:`${O}px`},children:[e.jsx(dt,{className:`mr-2 h-4 w-4 ${I?"text-orange-500":""}`}),c.name.length>20?c.name.slice(0,20)+"...":c.name]})})},c.id)},J=(c,j=1)=>{const I=m[c.id],O=p===c.id,L=c.chatrooms&&c.chatrooms.length>0,ee=j*12;return e.jsxs("div",{children:[e.jsx(ie,{children:e.jsxs(le,{className:"w-full justify-start hover:bg-accent/50",onClick:()=>D(c),style:{paddingLeft:`${ee}px`},children:[I&&L?e.jsx(Sa,{className:`mr-2 h-5 w-5 ${O?"text-emerald-500":""}`}):e.jsx(Jt,{className:`mr-2 h-5 w-5 ${O?"text-emerald-500":""}`}),c.name.length>20?c.name.slice(0,20)+"...":c.name]})}),L&&I&&e.jsx("div",{children:c.chatrooms.map(G=>P(G,j+1))})]},c.id)},V=(c,j=0,I=!1)=>{const O=d[c.id],L=g===c.id||I,ee=c.projects&&c.projects.length>0,G=j===0?0:j*12;return e.jsxs("div",{children:[e.jsx(ie,{children:e.jsxs(le,{className:"w-full justify-start hover:bg-accent/50",onClick:()=>{R(c),_(c)},style:{paddingLeft:G?`${G}px`:void 0},children:[O?e.jsx(Pe,{className:`mr-2 h-5 w-5 ${L?"text-indigo-500":""}`}):e.jsx(Pe,{className:`mr-2 h-5 w-5 ${L?"text-indigo-500":""}`}),c.name.length>20?c.name.slice(0,20)+"...":c.name]})}),ee&&O&&e.jsx("div",{children:c.projects.map(ne=>J(ne,j+1))})]},c.id)},re=t.slice(0,4),q=t.length>4?t.slice(4):[],Q=o?t.find(c=>c.id===o):null;return e.jsxs("div",{className:a,children:[re.map(c=>V(c)),Q&&V(Q,0,!0),q.length>0&&e.jsxs("div",{children:[e.jsx(ie,{children:e.jsxs(le,{className:"w-full justify-start mt-1 text-muted-foreground",onClick:z,children:[h?e.jsx(Zt,{className:"mr-2 h-4 w-4"}):e.jsx(ct,{className:"mr-2 h-4 w-4"}),"Show ",q.length," more"]})}),h&&e.jsx("div",{className:"pl-2 py-1 space-y-1 border-l-2 border-muted ml-2 mt-1",children:q.map(c=>e.jsx(ie,{children:e.jsxs(le,{className:"w-full justify-start text-sm hover:bg-accent/50",onClick:()=>E(c),children:[e.jsx(Pe,{className:`mr-2 h-4 w-4 ${g===c.id?"text-primary":""}`}),c.name]})},c.id))})]})]})}const cs="/_build/assets/IntelliOptima-Black-Text-Logo-z-6OsVSl.webp";var nt=1,ds=.9,us=.8,ms=.17,Oe=.1,ze=.999,hs=.9999,xs=.99,ps=/[\\\/_+.#"@\[\(\{&]/,fs=/[\\\/_+.#"@\[\(\{&]/g,gs=/[\s-]/,Ct=/[\s-]/g;function Be(t,a,s,d,l,m,u){if(m===a.length)return l===t.length?nt:xs;var h=`${l},${m}`;if(u[h]!==void 0)return u[h];for(var b=d.charAt(m),o=s.indexOf(b,l),w=0,g,y,p,N;o>=0;)g=Be(t,a,s,d,o+1,m+1,u),g>w&&(o===l?g*=nt:ps.test(t.charAt(o-1))?(g*=us,p=t.slice(l,o-1).match(fs),p&&l>0&&(g*=Math.pow(ze,p.length))):gs.test(t.charAt(o-1))?(g*=ds,N=t.slice(l,o-1).match(Ct),N&&l>0&&(g*=Math.pow(ze,N.length))):(g*=ms,l>0&&(g*=Math.pow(ze,o-l))),t.charAt(o)!==a.charAt(m)&&(g*=hs)),(g<Oe&&s.charAt(o-1)===d.charAt(m+1)||d.charAt(m+1)===d.charAt(m)&&s.charAt(o-1)!==d.charAt(m))&&(y=Be(t,a,s,d,o+1,m+2,u),y*Oe>g&&(g=y*Oe)),g>w&&(w=g),o=s.indexOf(b,o+1);return u[h]=w,w}function it(t){return t.toLowerCase().replace(Ct," ")}function js(t,a,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,Be(t,a,it(t),it(a),0,0,{})}var be='[cmdk-group=""]',Le='[cmdk-group-items=""]',vs='[cmdk-group-heading=""]',St='[cmdk-item=""]',lt=`${St}:not([aria-disabled="true"])`,Fe="cmdk-item-select",ue="data-value",bs=(t,a,s)=>js(t,a,s),It=n.createContext(void 0),ye=()=>n.useContext(It),kt=n.createContext(void 0),Ze=()=>n.useContext(kt),Tt=n.createContext(void 0),Mt=n.forwardRef((t,a)=>{let s=me(()=>{var i,v;return{search:"",value:(v=(i=t.value)!=null?i:t.defaultValue)!=null?v:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=me(()=>new Set),l=me(()=>new Map),m=me(()=>new Map),u=me(()=>new Set),h=Et(t),{label:b,children:o,value:w,onValueChange:g,filter:y,shouldFilter:p,loop:N,disablePointerSelection:M=!1,vimBindings:C=!0,..._}=t,R=he(),D=he(),B=he(),z=n.useRef(null),E=As();oe(()=>{if(w!==void 0){let i=w.trim();s.current.value=i,P.emit()}},[w]),oe(()=>{E(6,c)},[]);let P=n.useMemo(()=>({subscribe:i=>(u.current.add(i),()=>u.current.delete(i)),snapshot:()=>s.current,setState:(i,v,S)=>{var x,r,f,k;if(!Object.is(s.current[i],v)){if(s.current[i]=v,i==="search")Q(),re(),E(1,q);else if(i==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let T=document.getElementById(B);T?T.focus():(x=document.getElementById(R))==null||x.focus()}if(E(7,()=>{var T;s.current.selectedItemId=(T=j())==null?void 0:T.id,P.emit()}),S||E(5,c),((r=h.current)==null?void 0:r.value)!==void 0){let T=v??"";(k=(f=h.current).onValueChange)==null||k.call(f,T);return}}P.emit()}},emit:()=>{u.current.forEach(i=>i())}}),[]),J=n.useMemo(()=>({value:(i,v,S)=>{var x;v!==((x=m.current.get(i))==null?void 0:x.value)&&(m.current.set(i,{value:v,keywords:S}),s.current.filtered.items.set(i,V(v,S)),E(2,()=>{re(),P.emit()}))},item:(i,v)=>(d.current.add(i),v&&(l.current.has(v)?l.current.get(v).add(i):l.current.set(v,new Set([i]))),E(3,()=>{Q(),re(),s.current.value||q(),P.emit()}),()=>{m.current.delete(i),d.current.delete(i),s.current.filtered.items.delete(i);let S=j();E(4,()=>{Q(),S?.getAttribute("id")===i&&q(),P.emit()})}),group:i=>(l.current.has(i)||l.current.set(i,new Set),()=>{m.current.delete(i),l.current.delete(i)}),filter:()=>h.current.shouldFilter,label:b||t["aria-label"],getDisablePointerSelection:()=>h.current.disablePointerSelection,listId:R,inputId:B,labelId:D,listInnerRef:z}),[]);function V(i,v){var S,x;let r=(x=(S=h.current)==null?void 0:S.filter)!=null?x:bs;return i?r(i,s.current.search,v):0}function re(){if(!s.current.search||h.current.shouldFilter===!1)return;let i=s.current.filtered.items,v=[];s.current.filtered.groups.forEach(x=>{let r=l.current.get(x),f=0;r.forEach(k=>{let T=i.get(k);f=Math.max(T,f)}),v.push([x,f])});let S=z.current;I().sort((x,r)=>{var f,k;let T=x.getAttribute("id"),K=r.getAttribute("id");return((f=i.get(K))!=null?f:0)-((k=i.get(T))!=null?k:0)}).forEach(x=>{let r=x.closest(Le);r?r.appendChild(x.parentElement===r?x:x.closest(`${Le} > *`)):S.appendChild(x.parentElement===S?x:x.closest(`${Le} > *`))}),v.sort((x,r)=>r[1]-x[1]).forEach(x=>{var r;let f=(r=z.current)==null?void 0:r.querySelector(`${be}[${ue}="${encodeURIComponent(x[0])}"]`);f?.parentElement.appendChild(f)})}function q(){let i=I().find(S=>S.getAttribute("aria-disabled")!=="true"),v=i?.getAttribute(ue);P.setState("value",v||void 0)}function Q(){var i,v,S,x;if(!s.current.search||h.current.shouldFilter===!1){s.current.filtered.count=d.current.size;return}s.current.filtered.groups=new Set;let r=0;for(let f of d.current){let k=(v=(i=m.current.get(f))==null?void 0:i.value)!=null?v:"",T=(x=(S=m.current.get(f))==null?void 0:S.keywords)!=null?x:[],K=V(k,T);s.current.filtered.items.set(f,K),K>0&&r++}for(let[f,k]of l.current)for(let T of k)if(s.current.filtered.items.get(T)>0){s.current.filtered.groups.add(f);break}s.current.filtered.count=r}function c(){var i,v,S;let x=j();x&&(((i=x.parentElement)==null?void 0:i.firstChild)===x&&((S=(v=x.closest(be))==null?void 0:v.querySelector(vs))==null||S.scrollIntoView({block:"nearest"})),x.scrollIntoView({block:"nearest"}))}function j(){var i;return(i=z.current)==null?void 0:i.querySelector(`${St}[aria-selected="true"]`)}function I(){var i;return Array.from(((i=z.current)==null?void 0:i.querySelectorAll(lt))||[])}function O(i){let v=I()[i];v&&P.setState("value",v.getAttribute(ue))}function L(i){var v;let S=j(),x=I(),r=x.findIndex(k=>k===S),f=x[r+i];(v=h.current)!=null&&v.loop&&(f=r+i<0?x[x.length-1]:r+i===x.length?x[0]:x[r+i]),f&&P.setState("value",f.getAttribute(ue))}function ee(i){let v=j(),S=v?.closest(be),x;for(;S&&!x;)S=i>0?Ms(S,be):Es(S,be),x=S?.querySelector(lt);x?P.setState("value",x.getAttribute(ue)):L(i)}let G=()=>O(I().length-1),ne=i=>{i.preventDefault(),i.metaKey?G():i.altKey?ee(1):L(1)},Ce=i=>{i.preventDefault(),i.metaKey?O(0):i.altKey?ee(-1):L(-1)};return n.createElement(Z.div,{ref:a,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:i=>{var v;(v=_.onKeyDown)==null||v.call(_,i);let S=i.nativeEvent.isComposing||i.keyCode===229;if(!(i.defaultPrevented||S))switch(i.key){case"n":case"j":{C&&i.ctrlKey&&ne(i);break}case"ArrowDown":{ne(i);break}case"p":case"k":{C&&i.ctrlKey&&Ce(i);break}case"ArrowUp":{Ce(i);break}case"Home":{i.preventDefault(),O(0);break}case"End":{i.preventDefault(),G();break}case"Enter":{i.preventDefault();let x=j();if(x){let r=new Event(Fe);x.dispatchEvent(r)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:J.inputId,id:J.labelId,style:Ds},b),Ae(t,i=>n.createElement(kt.Provider,{value:P},n.createElement(It.Provider,{value:J},i))))}),ws=n.forwardRef((t,a)=>{var s,d;let l=he(),m=n.useRef(null),u=n.useContext(Tt),h=ye(),b=Et(t),o=(d=(s=b.current)==null?void 0:s.forceMount)!=null?d:u?.forceMount;oe(()=>{if(!o)return h.item(l,u?.id)},[o]);let w=At(l,m,[t.value,t.children,m],t.keywords),g=Ze(),y=ae(E=>E.value&&E.value===w.current),p=ae(E=>o||h.filter()===!1?!0:E.search?E.filtered.items.get(l)>0:!0);n.useEffect(()=>{let E=m.current;if(!(!E||t.disabled))return E.addEventListener(Fe,N),()=>E.removeEventListener(Fe,N)},[p,t.onSelect,t.disabled]);function N(){var E,P;M(),(P=(E=b.current).onSelect)==null||P.call(E,w.current)}function M(){g.setState("value",w.current,!0)}if(!p)return null;let{disabled:C,value:_,onSelect:R,forceMount:D,keywords:B,...z}=t;return n.createElement(Z.div,{ref:we(m,a),...z,id:l,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!y,"data-disabled":!!C,"data-selected":!!y,onPointerMove:C||h.getDisablePointerSelection()?void 0:M,onClick:C?void 0:N},t.children)}),Ns=n.forwardRef((t,a)=>{let{heading:s,children:d,forceMount:l,...m}=t,u=he(),h=n.useRef(null),b=n.useRef(null),o=he(),w=ye(),g=ae(p=>l||w.filter()===!1?!0:p.search?p.filtered.groups.has(u):!0);oe(()=>w.group(u),[]),At(u,h,[t.value,t.heading,b]);let y=n.useMemo(()=>({id:u,forceMount:l}),[l]);return n.createElement(Z.div,{ref:we(h,a),...m,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},s&&n.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:o},s),Ae(t,p=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?o:void 0},n.createElement(Tt.Provider,{value:y},p))))}),ys=n.forwardRef((t,a)=>{let{alwaysRender:s,...d}=t,l=n.useRef(null),m=ae(u=>!u.search);return!s&&!m?null:n.createElement(Z.div,{ref:we(l,a),...d,"cmdk-separator":"",role:"separator"})}),Cs=n.forwardRef((t,a)=>{let{onValueChange:s,...d}=t,l=t.value!=null,m=Ze(),u=ae(o=>o.search),h=ae(o=>o.selectedItemId),b=ye();return n.useEffect(()=>{t.value!=null&&m.setState("search",t.value)},[t.value]),n.createElement(Z.input,{ref:a,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":h,id:b.inputId,type:"text",value:l?t.value:u,onChange:o=>{l||m.setState("search",o.target.value),s?.(o.target.value)}})}),Ss=n.forwardRef((t,a)=>{let{children:s,label:d="Suggestions",...l}=t,m=n.useRef(null),u=n.useRef(null),h=ae(o=>o.selectedItemId),b=ye();return n.useEffect(()=>{if(u.current&&m.current){let o=u.current,w=m.current,g,y=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let p=o.offsetHeight;w.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return y.observe(o),()=>{cancelAnimationFrame(g),y.unobserve(o)}}},[]),n.createElement(Z.div,{ref:we(m,a),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":h,"aria-label":d,id:b.listId},Ae(t,o=>n.createElement("div",{ref:we(u,b.listInnerRef),"cmdk-list-sizer":""},o)))}),Is=n.forwardRef((t,a)=>{let{open:s,onOpenChange:d,overlayClassName:l,contentClassName:m,container:u,...h}=t;return n.createElement(ta,{open:s,onOpenChange:d},n.createElement(aa,{container:u},n.createElement(sa,{"cmdk-overlay":"",className:l}),n.createElement(ra,{"aria-label":t.label,"cmdk-dialog":"",className:m},n.createElement(Mt,{ref:a,...h}))))}),ks=n.forwardRef((t,a)=>ae(s=>s.filtered.count===0)?n.createElement(Z.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),Ts=n.forwardRef((t,a)=>{let{progress:s,children:d,label:l="Loading...",...m}=t;return n.createElement(Z.div,{ref:a,...m,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},Ae(t,u=>n.createElement("div",{"aria-hidden":!0},u)))}),U=Object.assign(Mt,{List:Ss,Item:ws,Input:Cs,Group:Ns,Separator:ys,Dialog:Is,Empty:ks,Loading:Ts});function Ms(t,a){let s=t.nextElementSibling;for(;s;){if(s.matches(a))return s;s=s.nextElementSibling}}function Es(t,a){let s=t.previousElementSibling;for(;s;){if(s.matches(a))return s;s=s.previousElementSibling}}function Et(t){let a=n.useRef(t);return oe(()=>{a.current=t}),a}var oe=typeof window>"u"?n.useEffect:n.useLayoutEffect;function me(t){let a=n.useRef();return a.current===void 0&&(a.current=t()),a}function ae(t){let a=Ze(),s=()=>t(a.snapshot());return n.useSyncExternalStore(a.subscribe,s,s)}function At(t,a,s,d=[]){let l=n.useRef(),m=ye();return oe(()=>{var u;let h=(()=>{var o;for(let w of s){if(typeof w=="string")return w.trim();if(typeof w=="object"&&"current"in w)return w.current?(o=w.current.textContent)==null?void 0:o.trim():l.current}})(),b=d.map(o=>o.trim());m.value(t,h,b),(u=a.current)==null||u.setAttribute(ue,h),l.current=h}),l}var As=()=>{let[t,a]=n.useState(),s=me(()=>new Map);return oe(()=>{s.current.forEach(d=>d()),s.current=new Map},[t]),(d,l)=>{s.current.set(d,l),a({})}};function Rs(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function Ae({asChild:t,children:a},s){return t&&n.isValidElement(a)?n.cloneElement(Rs(a),{ref:a.ref},s(a.props.children)):s(a)}var Ds={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Rt=n.forwardRef(({className:t,...a},s)=>e.jsx(U,{ref:s,className:A("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));Rt.displayName=U.displayName;const Dt=n.forwardRef(({className:t,...a},s)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(ya,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(U.Input,{ref:s,className:A("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));Dt.displayName=U.Input.displayName;const Pt=n.forwardRef(({className:t,...a},s)=>e.jsx(U.List,{ref:s,className:A("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));Pt.displayName=U.List.displayName;const Ot=n.forwardRef((t,a)=>e.jsx(U.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));Ot.displayName=U.Empty.displayName;const zt=n.forwardRef(({className:t,...a},s)=>e.jsx(U.Group,{ref:s,className:A("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));zt.displayName=U.Group.displayName;const Ps=n.forwardRef(({className:t,...a},s)=>e.jsx(U.Separator,{ref:s,className:A("-mx-1 h-px bg-border",t),...a}));Ps.displayName=U.Separator.displayName;const Lt=n.forwardRef(({className:t,...a},s)=>e.jsx(U.Item,{ref:s,className:A("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...a}));Lt.displayName=U.Item.displayName;function Os(){const t=Ke(),[a,s]=n.useState(!1),d=X(Ee),l=X(We),m=X(He),u=na(),[h,b]=n.useState(!1),[o,w]=n.useState(1),g=[{id:1,label:"Teamspace Details"},{id:2,label:"Teamspace Members"},{id:3,label:"Project Details"},{id:4,label:"Project Members"}],[y,p]=n.useState({name:"",description:"",context:""}),[N,M]=n.useState({name:"Default Project",description:"",context:"",isPrivate:!1}),[C,_]=n.useState([]),[R,D]=n.useState([]),[B,z]=n.useState("CONTRIBUTOR"),[E,P]=n.useState(""),[J,V]=n.useState([]),[re,q]=n.useState(!1),Q=r=>{P(r),q(!0);const{data:f}=u;if(!f||!f.members){V([]),q(!1);return}Je().auth.handler().then(({user:k})=>{const T=k?.email;setTimeout(()=>{if(r.trim()==="")V([]);else try{console.log("Organization members:",f.members);const K=f.members.filter($=>{if(!$?.user)return!1;const te=$.user.name&&$.user.name.toLowerCase().includes(r.toLowerCase()),Se=$.user.email&&$.user.email.toLowerCase().includes(r.toLowerCase()),pe=T&&$.user.email===T;return(te||Se)&&!pe}).map($=>(console.log("Processing member:",$),{memberId:$.id,userId:$.user.id,name:$.user.name||"Unknown",email:$.user.email||"",image:$.user.image||`https://ui-avatars.com/api/?name=${encodeURIComponent($.user.name||"Unknown")}`,role:"CONTRIBUTOR"}));console.log("Search results:",K),V(K)}catch(K){console.error("Error filtering organization members:",K),V([])}q(!1)},300)}).catch(k=>{console.error("Error getting current user:",k),q(!1),V([])})},c=r=>{if(console.log("Adding user to teamspace:",r),C.some(k=>k.email===r.email)){fe.error("This user has already been added");return}const f={id:ca(),userId:r.userId,role:B,invitedByUserId:"",teamspaceId:"",email:r.email,name:r.name||"Unknown",image:r.image};console.log("Created new teamspace member:",f),_(k=>[...k,f]),P(""),V([])},j=r=>{p({...y,[r.target.name]:r.target.value})},I=r=>{M({...N,[r.target.name]:r.target.value})},O=r=>{M({...N,isPrivate:r})},L=r=>{r&&(_(C.filter(f=>f.id!==r)),D(R.filter(f=>f.id!==r)))},ee=()=>{if(o===1&&!y.name.trim()){fe.error("Teamspace name is required");return}if(o===2&&console.log("Teamspace members before going to step 3:",C),o===3&&!N.name.trim()){fe.error("Project name is required");return}w(o+1)},G=()=>{w(o-1)},ne=r=>{switch(r){case"OWNER":return"bg-green-100 text-green-800";case"ADMIN":return"bg-red-100 text-red-800";case"MEMBER":return"bg-blue-100 text-blue-800";case"VIEWER":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};n.useEffect(()=>{o===4&&(console.log("Entering step 4 - Project Members selection"),D([]))},[o]);const Ce=(r,f)=>{if(console.log("Toggle project member:",r.name,f),f){const k={id:r.id,projectId:"",userId:r.userId,role:r.role,invitedByUserId:"",email:r.email,name:r.name,image:r.image};console.log("Adding to project members:",k),D(T=>[...T,k])}else console.log("Removing from project members:",r.id),D(k=>k.filter(T=>T.id!==r.id))},i=async r=>{if(r.preventDefault(),!a){s(!0);try{const f=Je(),{session:k,userID:T,user:K}=await f.auth.handler();console.log("Current user:",{userID:T,email:K.email}),console.log("All teamspace members before filtering:",C);const $=C.filter(F=>F.email&&F.email!==K.email).map(F=>(console.log("Adding member to teamspace API request:",F),{userId:F.userId,role:F.role,invitedByUserId:T,teamspaceId:""}));console.log("Final teamspace members list for API:",$),console.log("Creating teamspace:",y.name);const{data:te}=await f.chatrooms.createTeamspace({name:y.name,description:y.description,context:y.context,creatorId:T,members:$});console.log("Teamspace created:",te),console.log("All project members before filtering:",R);const Se=R.filter(F=>F.email&&F.email!==K.email).map(F=>(console.log("Adding member to project API request:",F),{projectId:"",userId:F.userId,role:F.role,invitedByUserId:T}));console.log("Final project members list for API:",Se),console.log("Creating project:",N.name);const{data:pe}=await f.chatrooms.createProject({teamspaceId:te.id,name:N.name,description:N.description,context:N.context,creatorId:T,isPrivate:N.isPrivate,members:Se});console.log("Project created:",pe),te.projects.push(pe),d(F=>[...F,te]),l(te.id),m(pe.id),fe.success("Teamspace and project created successfully"),b(!1),setTimeout(()=>{t({to:"/teamspace/$teamspaceId",params:{teamspaceId:te.id},viewTransition:!0})},100)}catch(f){console.error("Error creating teamspace:",f),fe.error("Failed to create teamspace")}finally{s(!1)}}},v=()=>{w(1),p({name:"",description:"",context:""}),M({name:"Default Project",description:"",context:"",isPrivate:!1}),_([]),D([]),z("CONTRIBUTOR"),P(""),V([]),q(!1)};n.useEffect(()=>{h||v()},[h]);const S=()=>{switch(o){case 1:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium text-lg flex items-center",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-indigo-100 text-indigo-700 mr-2",children:e.jsx("span",{className:"text-xs font-semibold",children:"1"})}),"Teamspace Details"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(Y,{htmlFor:"teamspace-name",children:["Teamspace Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(et,{id:"teamspace-name",name:"name",value:y.name,onChange:j,placeholder:"e.g. Marketing Team",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"teamspace-description",children:"Description"}),e.jsx(Ie,{id:"teamspace-description",name:"description",value:y.description,onChange:j,placeholder:"What is this teamspace for?"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"teamspace-context",children:"Context"}),e.jsx(Ie,{id:"teamspace-context",name:"context",value:y.context,onChange:j,placeholder:"Any additional context for AI assistants"})]})]})]});case 2:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium text-lg flex items-center",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-indigo-100 text-indigo-700 mr-2",children:e.jsx("span",{className:"text-xs font-semibold",children:"2"})}),"Teamspace Members"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{children:"Search for users"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{htmlFor:"member-role",className:"text-sm",children:"Role:"}),e.jsxs("select",{id:"member-role",value:B,onChange:r=>z(r.target.value),className:"px-3 py-1 text-sm border rounded-md",children:[e.jsx("option",{value:"OWNER",children:"Owner"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"CONTRIBUTOR",children:"Contributor"}),e.jsx("option",{value:"VIEWER",children:"Viewer"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(Rt,{className:"rounded-lg border shadow-md",children:[e.jsx(Dt,{placeholder:"Search users by name or email...",value:E,onValueChange:Q}),e.jsx(Pt,{children:re?e.jsx("div",{className:"py-6 text-center text-sm",children:"Searching..."}):J.length===0&&E?e.jsx(Ot,{children:"No users found."}):e.jsx(zt,{heading:"Users",children:e.jsx(Re,{className:"h-[200px]",children:J.map(r=>e.jsxs(Lt,{value:r.email,className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{children:e.jsx("img",{src:r.image,alt:r.name})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.email})]})]}),e.jsx(W,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(r),children:e.jsx(Oa,{className:"h-4 w-4"})})]},r.memberId))})})})]})}),C.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Selected Members"}),e.jsx(Re,{className:"h-[200px]",children:e.jsx("div",{className:"border rounded-md divide-y",children:C.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.image&&e.jsx(xe,{className:"h-8 w-8",children:e.jsx("img",{src:r.image,alt:r.name||r.email||""})}),e.jsxs("div",{children:[r.name&&e.jsx("p",{className:"text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.email})]}),e.jsx(Qe,{className:ne(r.role),children:r.role})]}),e.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>L(r.id),className:"h-8 w-8 p-0",children:[e.jsx(la,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Remove"})]})]},r.id))})})]}),C.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"No members added yet. You will be added as an Owner automatically."})]})]});case 3:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium text-lg flex items-center",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-emerald-100 text-emerald-700 mr-2",children:e.jsx("span",{className:"text-xs font-semibold",children:"3"})}),"Project Details"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(Y,{htmlFor:"project-name",children:["Project Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(et,{id:"project-name",name:"name",value:N.name,onChange:I,placeholder:"e.g. General",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"project-description",children:"Description"}),e.jsx(Ie,{id:"project-description",name:"description",value:N.description,onChange:I,placeholder:"What is this project about?"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"project-context",children:"Context"}),e.jsx(Ie,{id:"project-context",name:"context",value:N.context,onChange:I,placeholder:"Any specific context for this project"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(st,{id:"isPrivate",checked:N.isPrivate,onCheckedChange:O}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(Y,{htmlFor:"isPrivate",className:"text-sm font-medium leading-none flex items-center",children:"Make project private"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Private projects are only visible to invited members"})]})]})]})]});case 4:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium text-lg flex items-center",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-emerald-100 text-emerald-700 mr-2",children:e.jsx("span",{className:"text-xs font-semibold",children:"4"})}),"Project Members"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which teamspace members to include in this project:"}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Available members: ",C.length,", Selected for project: ",R.length]}),C.length>0?e.jsx(Re,{className:"h-[300px] border rounded-md",children:e.jsx("div",{className:"divide-y",children:C.map(r=>{const f=R.some(k=>k.id===r.id);return e.jsx("div",{className:"flex items-center justify-between p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{id:`project-member-${r.id}`,checked:f,onCheckedChange:k=>{Ce(r,!!k)}}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.image&&e.jsx(xe,{className:"h-8 w-8",children:e.jsx("img",{src:r.image,alt:r.name||r.email||""})}),e.jsxs("div",{children:[r.name&&e.jsx("p",{className:"text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["User ID: ",r.userId?.slice(0,6),"..."]})]})]}),e.jsx(Qe,{className:ne(r.role),children:r.role})]})},r.id)})})}):e.jsx("p",{className:"text-sm",children:"No teamspace members to select from. You will be added as an Owner automatically."})]});default:return null}},x=()=>e.jsx("div",{className:"flex justify-center mb-6",children:g.map((r,f)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${r.id===o?r.id<=2?"border-indigo-600 bg-indigo-600 text-white":"border-emerald-600 bg-emerald-600 text-white":r.id<o?r.id<=2?"border-indigo-600 bg-indigo-100 text-indigo-600":"border-emerald-600 bg-emerald-100 text-emerald-600":"border-gray-300 bg-white text-gray-500"}`,children:r.id<o?e.jsx(oa,{className:"w-4 h-4"}):e.jsx("span",{className:"text-xs",children:r.id})}),f<g.length-1&&e.jsx("div",{className:`w-10 h-1 ${r.id<o?r.id<=1?"bg-indigo-600":"bg-emerald-600":"bg-gray-300"}`})]},r.id))});return e.jsx(_e,{children:e.jsxs(Ue,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(Ia,{open:h,onOpenChange:r=>{a&&!r||b(r)},children:[e.jsx(ka,{asChild:!0,children:e.jsxs(W,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 ml-1 rounded-full hover:cursor-pointer",children:[e.jsx(Pa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Create Teamspace"})]})}),e.jsx(Ta,{className:"sm:max-w-[600px]",children:e.jsxs("form",{onSubmit:r=>{r.preventDefault(),o===4&&i(r)},children:[e.jsxs(Ma,{children:[e.jsx("div",{className:`h-1.5 w-full absolute top-0 left-0 rounded-t-lg ${o<=2?"bg-indigo-500":"bg-emerald-500"}`}),e.jsx(Ea,{className:"text-xl mt-2",children:"Create New Teamspace"}),e.jsx(Aa,{children:"Create a teamspace with a default project to organize your work."})]}),x(),e.jsx("div",{className:"py-4",children:S()}),e.jsxs(Ra,{className:"flex justify-between",children:[e.jsx("div",{children:o>1&&e.jsxs(W,{type:"button",variant:"outline",onClick:G,disabled:a,children:[e.jsx($a,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Da,{asChild:!0,children:e.jsx(W,{variant:"outline",type:"button",disabled:a,onClick:v,children:"Cancel"})}),o<4?e.jsxs(W,{type:"button",onClick:ee,className:`${o<=2?"bg-indigo-600 hover:bg-indigo-700":"bg-emerald-600 hover:bg-emerald-700"}`,disabled:a,children:["Next",e.jsx(ia,{className:"h-4 w-4 ml-2"})]}):e.jsx(W,{type:"button",onClick:r=>i(r),className:"bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?"Creating...":"Create Teamspace & Project"})]})]})]})})]})}),e.jsx(qe,{children:e.jsx("p",{children:"Create Teamspace"})})]})})}function zs(){const{isMobile:t}=Ne(),a=ut().data,s=za(),d=a?.user;return e.jsx(de,{children:e.jsx(ie,{children:e.jsxs(mt,{children:[e.jsx(ht,{asChild:!0,children:e.jsxs(le,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(xe,{className:"h-8 w-8 rounded-lg",children:[e.jsx(tt,{src:d?.image||"",alt:d?.name||""}),e.jsx(at,{className:"rounded-lg",children:"CN"})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:d?.name}),e.jsx("span",{className:"truncate text-xs",children:d?.email})]}),e.jsx(Ba,{className:"ml-auto size-4"})]})}),e.jsxs(xt,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"start",sideOffset:4,children:[e.jsx(da,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[e.jsxs(xe,{className:"h-8 w-8 rounded-lg",children:[e.jsx(tt,{src:d?.image||"",alt:d?.name||""}),e.jsx(at,{className:"rounded-lg",children:"CN"})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:d?.name}),e.jsx("span",{className:"truncate text-xs",children:d?.email})]})]})}),e.jsx(ke,{}),e.jsx($e,{children:e.jsxs(H,{children:[e.jsx(ua,{}),"Upgrade to Pro"]})}),e.jsx(ke,{}),e.jsxs($e,{children:[e.jsxs(H,{children:[e.jsx(La,{}),"Account"]}),e.jsxs(H,{children:[e.jsx(Fa,{}),"Billing"]}),e.jsxs(H,{children:[e.jsx(ma,{}),"Notifications"]})]}),e.jsx(ke,{}),e.jsxs(H,{onClick:s,className:"text-red-500 focus:text-red-500",children:[e.jsx(Ua,{}),"Log out"]})]})]})})})}function $t({...t}){const a=Ke(),s=Te(Ee),d=Te(Ge),[l,m]=ce(Me),u=X(We),h=X(He),b=n.useMemo(()=>ha(d||[]),[d]),o=n.useMemo(()=>{const p=new Date,N=new Date(p.getTime()-7*24*60*60*1e3),M=new Date(p.getTime()-30*24*60*60*1e3),C=b.slice(0,5),_=b.filter(B=>De(B)>=N&&!C.some(E=>E.id===B.id)).slice(0,5),R=b.filter(B=>{const z=De(B);return z<N&&z>=M}).slice(0,5),D=b.filter(B=>De(B)<M).slice(0,5);return{recent:C,previousWeek:_,previousMonth:R,previous:D}},[b]),w=p=>{if(m(p),p.projectId){const N=s?.find(M=>M.projects?.some(C=>C.id===p.projectId));if(N){u(N.id);const M=N.projects?.find(C=>C.id===p.projectId);M&&h(M.id)}}else u(void 0),h(void 0);a({to:"/chat/$chatroomId",params:{chatroomId:p.id},viewTransition:!0})},g=()=>{m(void 0),h(void 0),u(void 0),setTimeout(()=>{a({to:"/chat",viewTransition:!0})},100)},y=p=>e.jsx(ie,{children:e.jsx(le,{className:"max-w-full text-left",onClick:()=>w(p),children:e.jsxs("div",{className:"flex items-center w-full overflow-hidden",children:[e.jsx(dt,{className:`h-4 w-4 flex-shrink-0 ${l?.id===p.id?"text-orange-500":""}`}),e.jsx("span",{className:"ml-2 truncate",children:p.name.length>20?p.name.slice(0,20)+"...":p.name})]})})},p.id);return e.jsxs(ts,{className:"border-r-0 overflow-hidden",...t,children:[e.jsx(ss,{children:e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx("button",{className:"flex items-start hover:cursor-pointer",onClick:g,children:e.jsx("img",{src:cs,alt:"IntelliOptima",className:"h-8 object-contain object-left"})}),e.jsx(_e,{children:e.jsxs(Ue,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(W,{size:"icon",variant:"ghost",onClick:g,children:[e.jsx(xa,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"New Chat"})]})}),e.jsx(qe,{children:e.jsx("p",{children:"New Chat"})})]})})]})}),e.jsx(is,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex flex-col gap-4 overflow-hidden",children:[e.jsxs(je,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{children:"Teamspaces"}),e.jsx(Os,{})]}),e.jsx(de,{children:e.jsx(os,{items:s})})]}),e.jsx(ns,{}),e.jsxs(je,{children:[e.jsx(ve,{children:"Recent"}),e.jsx(de,{children:o.recent.map(y)})]}),o.previousWeek.length>0&&e.jsxs(je,{children:[e.jsx(ve,{children:"Previous 7 Days"}),e.jsx(de,{children:o.previousWeek.map(y)})]}),o.previousMonth.length>0&&e.jsxs(je,{children:[e.jsx(ve,{children:"Previous 30 Days"}),e.jsx(de,{children:o.previousMonth.map(y)})]}),o.previous.length>0&&e.jsxs(je,{children:[e.jsx(ve,{children:"Previous"}),e.jsx(de,{children:o.previous.map(y)})]}),!b.length&&e.jsx("div",{className:"px-4 py-3 text-sm text-muted-foreground",children:"No recent chats. Start a new conversation using the button above."})]})}),e.jsx(as,{}),e.jsx(rs,{className:"flex items-center",children:e.jsx(zs,{})})]})}function Bt({...t}){return e.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function Ft({className:t,...a}){return e.jsx("ol",{"data-slot":"breadcrumb-list",className:A("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...a})}function _t({className:t,...a}){return e.jsx("li",{"data-slot":"breadcrumb-item",className:A("inline-flex items-center gap-1.5",t),...a})}function Ut({className:t,...a}){return e.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:A("text-foreground font-normal",t),...a})}const Ls="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-building-2'%3e%3cpath%20d='M6%2022V4a2%202%200%200%201%202-2h8a2%202%200%200%201%202%202v18Z'/%3e%3cpath%20d='M6%2012H4a2%202%200%200%200-2%202v6a2%202%200%200%200%202%202h2'/%3e%3cpath%20d='M18%209h2a2%202%200%200%201%202%202v9a2%202%200%200%201-2%202h-2'/%3e%3cpath%20d='M10%206h4'/%3e%3cpath%20d='M10%2010h4'/%3e%3cpath%20d='M10%2014h4'/%3e%3cpath%20d='M10%2018h4'/%3e%3c/svg%3e",Vt=()=>{const{activeOrganization:t,changeActiveOrganization:a}=pa(),{data:s}=fa(),d=ut().data?.user,l=t?.members.some(u=>u.user.email===d?.email&&(u.role==="owner"||u.role==="admin")),m=async u=>{await a(u)};return e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(mt,{children:[e.jsx(ht,{asChild:!0,children:e.jsxs(W,{variant:"ghost",className:"flex items-center gap-2 p-1",children:[e.jsx(xe,{className:"h-8 w-8",children:e.jsx(Ca,{src:t?.logo||Ls,alt:d?.name,className:"h-8 w-8"})}),t&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"",children:t.name}),e.jsx(ct,{className:"h-4 w-4"})]})]})}),e.jsx(xt,{align:"end",className:"w-56",children:e.jsxs($e,{children:[e.jsxs(ga,{children:[e.jsx(ja,{children:e.jsxs(ge,{className:"flex",to:"/organizations",children:[e.jsx(_a,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Organizations"})]})}),e.jsx(va,{children:e.jsxs(ba,{children:[s&&s.map(u=>e.jsx(H,{onClick:()=>m(u.id),className:u.id===t?.id?"bg-accent":"",children:u.name},u.id)),e.jsx(ke,{}),e.jsx(H,{asChild:!0,children:e.jsx(ge,{to:"/organizations",children:"Manage Organizations"})})]})})]}),e.jsx(H,{asChild:!0,disabled:!l,children:e.jsxs(ge,{to:"/members",children:[e.jsx(wa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Team Members"})]})}),e.jsx(H,{asChild:!0,disabled:!l,children:e.jsxs(ge,{to:"/organization-settings",children:[e.jsx(Na,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})}),e.jsx(H,{asChild:!0,disabled:!l,children:e.jsxs(ge,{to:"/chat",children:[e.jsx(qa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"AI Providers"})]})})]})})]})})};function Ws(){const t=Te(Me),a=X(Ee),s=X(Ge),{userId:d}=pt.useRouteContext();return ft(d),n.useEffect(()=>{const l=async()=>{const u=await jt();a(u)},m=async()=>{const u=await vt();s(u)};Promise.all([l(),m()])},[]),e.jsxs(Xe,{children:[e.jsx($t,{}),e.jsxs(yt,{className:"flex flex-col h-screen overflow-y-auto",children:[e.jsxs("header",{className:"sticky top-0 flex h-14 shrink-0 items-center gap-2 bg-background p-4",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2 px-3",children:[e.jsx(Nt,{}),e.jsx(Ye,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(Bt,{children:e.jsx(Ft,{children:e.jsx(_t,{children:e.jsx(Ut,{className:"line-clamp-1",children:t?.name})})})})]}),e.jsx(Vt,{})]}),e.jsx("div",{className:"h-full overflow-y-hidden",children:e.jsx(gt,{})})]})]})}const Hs=function(){const a=Te(Me),s=X(Ee),d=X(Ge),{userId:l}=pt.useRouteContext();return ft(l),n.useEffect(()=>{const m=async()=>{const h=await jt();s(h)},u=async()=>{const h=await vt();d(h)};Promise.all([m(),u()])},[]),e.jsxs(Xe,{children:[e.jsx($t,{}),e.jsxs(yt,{className:"flex flex-col h-screen overflow-y-auto",children:[e.jsxs("header",{className:"sticky top-0 flex h-14 shrink-0 items-center gap-2 bg-background p-4",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2 px-3",children:[e.jsx(Nt,{}),e.jsx(Ye,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(Bt,{children:e.jsx(Ft,{children:e.jsx(_t,{children:e.jsx(Ut,{className:"line-clamp-1",children:a?.name})})})})]}),e.jsx(Vt,{})]}),e.jsx("div",{className:"h-full overflow-y-hidden",children:e.jsx(gt,{})})]})]})};export{Hs as component,Ws as default};
