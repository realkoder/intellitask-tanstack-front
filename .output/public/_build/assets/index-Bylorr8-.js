import{Q as N,T as z,u as w,r as d,j as e,B as i,V as l,C as m,d as x,a as C,b as y,w as b,c as v,U as O,h as M,E as u,k}from"./client-LSARlrfQ.js";const L=function(){const{data:s}=N(),{data:n,error:D}=z(),c=w(),[h,g]=d.useState(new Map);d.useEffect(()=>{if(!s)return;(async()=>{const p=await Promise.all(s?.map(async t=>{const r=await u.getFullOrganization({query:{organizationId:t.id}});return{id:t.id,memberCount:(r.data?.members||[]).length}})),f=new Map(p.map(({id:t,memberCount:r})=>[t,r]));g(f)})()},[s]);const o=()=>{c({to:"/create-organization"})},j=async a=>{await u.setActive({organizationId:a}),k.success("Organization switched successfully"),c({to:"/chat",reloadDocument:!0})};return e.jsxs("div",{className:"space-y-8 m-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Organizations"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your organizations and teams"})]}),e.jsxs(i,{onClick:o,children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),"New Organization"]})]}),s?.length===0?e.jsx(m,{className:"m-4",children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"mb-4 text-muted-foreground text-center",children:"You don't have any organizations yet"}),e.jsxs(i,{onClick:o,children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),"Create your first organization"]})]})}):e.jsx("div",{className:"grid gap-6 m-8 sm:grid-cols-2 lg:grid-cols-3",children:s?.map(a=>e.jsxs(m,{className:`transition-all ${n?.id===a.id?"border-primary":""}`,children:[e.jsxs(C,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(y,{children:a.name}),n?.id===a.id&&e.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:e.jsx(b,{className:"h-4 w-4 text-primary"})})]}),e.jsxs(v,{children:["Created on ",new Date(a.createdAt).toLocaleDateString()]})]}),e.jsxs(x,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description||"No description provided"}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsx(O,{className:"mr-1 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[h.get(a.id)," members"]})]})]}),e.jsx(M,{children:n?.id===a.id?e.jsx(i,{variant:"outline",className:"w-full",disabled:!0,children:"Current Organization"}):e.jsx(i,{className:"w-full",onClick:()=>j(a.id),children:"Switch to this organization"})})]},a.id))})]})};export{L as component};
