import{l as be,j as e,a2 as A,r as c,aH as he,aI as K,aJ as z,aK as q,aL as R,aM as Q,aN as xe,aO as ve,aP as P,aQ as J,ah as pe,ai as Ne,Y as Ce,a3 as je,B as E,U as ye,Z as we,a6 as Te,_ as Re,a7 as Me,aR as Ie,g as Le,aS as Ae,$ as Se,aw as Ee,ax as Pe,V as Oe,X as ke,al as _e,k as T,aT as $e,aU as De}from"./client-LSARlrfQ.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function Ye({className:s,...r}){return e.jsx("div",{"data-slot":"skeleton",className:A("bg-primary/10 animate-pulse rounded-md",s),...r})}var V="Tabs",[Fe,Ze]=z(V,[Q]),X=Q(),[Ve,U]=Fe(V),Y=c.forwardRef((s,r)=>{const{__scopeTabs:n,value:l,onValueChange:i,defaultValue:u,orientation:d="horizontal",dir:g,activationMode:h="automatic",...b}=s,f=he(g),[m,x]=K({prop:l,onChange:i,defaultProp:u});return e.jsx(Ve,{scope:n,baseId:q(),value:m,onValueChange:x,orientation:d,dir:f,activationMode:h,children:e.jsx(R.div,{dir:f,"data-orientation":d,...b,ref:r})})});Y.displayName=V;var Z="TabsList",ee=c.forwardRef((s,r)=>{const{__scopeTabs:n,loop:l=!0,...i}=s,u=U(Z,n),d=X(n);return e.jsx(xe,{asChild:!0,...d,orientation:u.orientation,dir:u.dir,loop:l,children:e.jsx(R.div,{role:"tablist","aria-orientation":u.orientation,...i,ref:r})})});ee.displayName=Z;var se="TabsTrigger",te=c.forwardRef((s,r)=>{const{__scopeTabs:n,value:l,disabled:i=!1,...u}=s,d=U(se,n),g=X(n),h=ne(d.baseId,l),b=ie(d.baseId,l),f=l===d.value;return e.jsx(ve,{asChild:!0,...g,focusable:!i,active:f,children:e.jsx(R.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":b,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...u,ref:r,onMouseDown:P(s.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?d.onValueChange(l):m.preventDefault()}),onKeyDown:P(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&d.onValueChange(l)}),onFocus:P(s.onFocus,()=>{const m=d.activationMode!=="manual";!f&&!i&&m&&d.onValueChange(l)})})})});te.displayName=se;var ae="TabsContent",re=c.forwardRef((s,r)=>{const{__scopeTabs:n,value:l,forceMount:i,children:u,...d}=s,g=U(ae,n),h=ne(g.baseId,l),b=ie(g.baseId,l),f=l===g.value,m=c.useRef(f);return c.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(J,{present:i||f,children:({present:x})=>e.jsx(R.div,{"data-state":f?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":h,hidden:!x,id:b,tabIndex:0,...d,ref:r,style:{...s.style,animationDuration:m.current?"0s":void 0},children:x&&u})})});re.displayName=ae;function ne(s,r){return`${s}-trigger-${r}`}function ie(s,r){return`${s}-content-${r}`}var Ue=Y,oe=ee,le=te,ce=re;const Be=Ue,de=c.forwardRef(({className:s,...r},n)=>e.jsx(oe,{ref:n,className:A("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r}));de.displayName=oe.displayName;const D=c.forwardRef(({className:s,...r},n)=>e.jsx(le,{ref:n,className:A("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r}));D.displayName=le.displayName;const F=c.forwardRef(({className:s,...r},n)=>e.jsx(ce,{ref:n,className:A("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));F.displayName=ce.displayName;function es(s){const[r,n]=c.useState(!1),[l,i]=c.useState("current"),[u,d]=c.useState(""),[g,h]=c.useState(!1),b=pe(Ne),m=[...s.type==="teamspace"?s.members.filter(t=>t.user?.name?.toLowerCase().includes(u.toLowerCase())||t.user?.email?.toLowerCase().includes(u.toLowerCase())).filter((t,a,o)=>a===o.findIndex(p=>p.user?.id===t.user?.id)):s.members.filter(t=>t.user?.name?.toLowerCase().includes(u.toLowerCase())||t.user?.email?.toLowerCase().includes(u.toLowerCase())).filter((t,a,o)=>a===o.findIndex(p=>p.user?.id===t.user?.id))].sort((t,a)=>{if(t.hasLeft!==a.hasLeft)return t.hasLeft?1:-1;const o={OWNER:0,ADMIN:1,CONTRIBUTOR:2,VIEWER:3};return(o[t.role]||4)-(o[a.role]||4)}),x=t=>{switch(t){case"OWNER":return"bg-green-100 text-green-800 border-green-200";case"ADMIN":return"bg-red-100 text-red-800 border-red-200";case"CONTRIBUTOR":return"bg-blue-100 text-blue-800 border-blue-200";case"VIEWER":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=async t=>{if(!g){h(!0);try{const a=_e();if(s.type==="teamspace"){const o=s.members.find(y=>y.id===t);if(!o){T.error("Member not found");return}const p=o.hasLeft;await a.chatrooms.changeTeamspaceMemberStatus(s.teamspaceId,t,{kickStatus:!p}),b(y=>y.map(v=>{if(v.id===s.teamspaceId){const k=v.members?.map(N=>N.id===t?{...N,hasLeft:!o.hasLeft}:N)||[],w=v.projects?.map(N=>{const _=N.members?.map(j=>j.user?.id===o.user?.id?{...j,hasLeft:!o.hasLeft}:j)||[],C=N.chatrooms?.map(j=>{const L=j.members?.map($=>$.user?.id===o.user?.id?{...$,hasLeft:!o.hasLeft}:$)||[];return{...j,members:L}})||[];return{...N,members:_,chatrooms:C}})||[];return{...v,members:k,projects:w}}return v})),p?T.success("Member re-invited successfully"):T.success("Member removed successfully")}else{const o=s.members.find(y=>y.id===t);if(!o){T.error("Member not found");return}const p=o.hasLeft;await a.chatrooms.changeProjectMemberStatus(s.projectId,t,{kickStatus:!p}),b(y=>y.map(v=>{if(v.id===s.teamspaceId){const k=v.projects?.map(w=>{if(w.id===s.projectId){const N=w.members?.map(C=>C.id===t?{...C,hasLeft:!o.hasLeft}:C)||[],_=w.chatrooms?.map(C=>{const j=C.members?.map(L=>L.user?.id===o.user?.id?{...L,hasLeft:!o.hasLeft}:L)||[];return{...C,members:j}})||[];return{...w,members:N,chatrooms:_}}return w})||[];return{...v,projects:k}}return v})),setTimeout(()=>n(!1),500),p?T.success("Member re-invited successfully"):T.success("Member removed successfully")}}catch(a){console.error("Error updating member status:",a),T.error("Failed to update member status")}finally{h(!1)}}},M=(()=>{const{userId:t}=s;if(s.type==="teamspace"){const a=s.members.find(o=>o.user.id===t);return a?.role==="OWNER"||a?.role==="ADMIN"}else{const a=s.members.find(o=>o.user.id===t);return a?.role==="OWNER"||a?.role==="ADMIN"}})(),I=t=>{const a=t.hasLeft;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:`h-8 w-8 ${a?"opacity-50":""}`,children:t.user?.image?e.jsx("img",{src:t.user.image,alt:t.user?.name||"User",className:a?"grayscale":""}):e.jsx("div",{className:`bg-gray-200 h-full w-full flex items-center justify-center text-gray-700 ${a?"bg-gray-100":""}`,children:(t.user?.name||"U").charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-medium flex items-center ${a?"text-muted-foreground":""}`,children:[t.user?.name||"Unknown User",a&&e.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-gray-100 text-gray-500",children:"Left"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.user?.email||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:`${x(t.role)} ${a?"opacity-50":""}`,children:t.role}),M&&t.user.id!==s.userId&&e.jsx(E,{variant:a?"outline":"ghost",size:"icon",disabled:g,onClick:()=>S(t.id),className:`h-8 w-8 ${a?"border-green-200 hover:bg-green-50 hover:text-green-700":""}`,title:a?"Re-invite member":"Remove member",children:a?e.jsx(Oe,{className:"h-4 w-4 text-green-600"}):e.jsx(ke,{className:"h-4 w-4"})})]})]},t.id)};return e.jsxs(Ce,{open:r,onOpenChange:n,children:[e.jsx(je,{asChild:!0,children:s.children||e.jsxs(E,{size:"sm",variant:"outline",className:"w-full border-indigo-600/20 text-indigo-700 hover:bg-indigo-50",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"})," Manage Members"]})}),e.jsxs(we,{className:"sm:max-w-[550px]",children:[e.jsxs(Te,{children:[e.jsxs(Re,{children:["Manage ",s.type==="teamspace"?"Teamspace":"Project"," Members"]}),e.jsxs(Me,{children:["View and manage who has access to this ",s.type]})]}),e.jsxs(Be,{defaultValue:"current",value:l,onValueChange:i,className:"mt-4",children:[e.jsxs(de,{className:"grid w-full grid-cols-2",children:[e.jsx(D,{value:"current",children:"Current Members"}),e.jsx(D,{value:"invite",disabled:!M,children:"Invite Members"})]}),e.jsxs(F,{value:"current",className:"mt-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Le,{type:"text",placeholder:"Search members...",className:"pl-8",value:u,onChange:t=>d(t.target.value)})]})}),e.jsx(Ae,{className:"h-[320px] rounded-md border p-4",children:e.jsx("div",{className:"space-y-4",children:m.length>0?e.jsxs(e.Fragment,{children:[m.some(t=>!t.hasLeft)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Active Members"}),e.jsx("div",{className:"space-y-3",children:m.filter(t=>!t.hasLeft).map(I)})]}),m.some(t=>t.hasLeft)&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-2 flex items-center text-xs text-muted-foreground",children:[e.jsx("div",{className:"h-px bg-border flex-grow mr-2"}),e.jsx("span",{children:"Former Members"}),e.jsx("div",{className:"h-px bg-border flex-grow ml-2"})]}),e.jsx("div",{className:"space-y-3 mt-3",children:m.filter(t=>t.hasLeft).map(I)})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No members found"})})})]}),e.jsx(F,{value:"invite",className:"mt-4",children:e.jsxs("div",{className:"bg-muted/40 rounded-md p-8 text-center",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Invite Members"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"This feature is coming soon"}),e.jsx(E,{variant:"outline",onClick:()=>i("current"),children:"Back to Current Members"})]})})]}),e.jsx(Se,{children:e.jsx(E,{variant:"outline",onClick:()=>n(!1),children:"Close"})})]})]})}var B="Collapsible",[Ge,ss]=z(B),[He,G]=Ge(B),ue=c.forwardRef((s,r)=>{const{__scopeCollapsible:n,open:l,defaultOpen:i,disabled:u,onOpenChange:d,...g}=s,[h=!1,b]=K({prop:l,defaultProp:i,onChange:d});return e.jsx(He,{scope:n,disabled:u,contentId:q(),open:h,onOpenToggle:c.useCallback(()=>b(f=>!f),[b]),children:e.jsx(R.div,{"data-state":W(h),"data-disabled":u?"":void 0,...g,ref:r})})});ue.displayName=B;var me="CollapsibleTrigger",fe=c.forwardRef((s,r)=>{const{__scopeCollapsible:n,...l}=s,i=G(me,n);return e.jsx(R.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":W(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...l,ref:r,onClick:P(s.onClick,i.onOpenToggle)})});fe.displayName=me;var H="CollapsibleContent",ge=c.forwardRef((s,r)=>{const{forceMount:n,...l}=s,i=G(H,s.__scopeCollapsible);return e.jsx(J,{present:n||i.open,children:({present:u})=>e.jsx(We,{...l,ref:r,present:u})})});ge.displayName=H;var We=c.forwardRef((s,r)=>{const{__scopeCollapsible:n,present:l,children:i,...u}=s,d=G(H,n),[g,h]=c.useState(l),b=c.useRef(null),f=$e(r,b),m=c.useRef(0),x=m.current,S=c.useRef(0),O=S.current,M=d.open||g,I=c.useRef(M),t=c.useRef(void 0);return c.useEffect(()=>{const a=requestAnimationFrame(()=>I.current=!1);return()=>cancelAnimationFrame(a)},[]),De(()=>{const a=b.current;if(a){t.current=t.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";const o=a.getBoundingClientRect();m.current=o.height,S.current=o.width,I.current||(a.style.transitionDuration=t.current.transitionDuration,a.style.animationName=t.current.animationName),h(l)}},[d.open,l]),e.jsx(R.div,{"data-state":W(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!M,...u,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":O?`${O}px`:void 0,...s.style},children:M&&i})});function W(s){return s?"open":"closed"}var Ke=ue,ze=fe,qe=ge;const ts=Ke,as=ze,Qe=c.forwardRef(({className:s,...r},n)=>e.jsx(qe,{ref:n,className:A("overflow-hidden transition-all duration-300 ease-in-out",s),...r}));Qe.displayName="CollapsibleContent";export{ts as C,Xe as H,es as M,Ye as S,as as a,Qe as b};
