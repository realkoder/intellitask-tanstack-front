import{l as Q,r as t,j as e,a2 as m,T as W,Y as k,a3 as X,B as c,a4 as ee,Z as D,_ as A,a5 as se,$ as z,a6 as ae,a7 as le,a8 as ne,a9 as ie,C as f,a as S,b as R,c as O,d as b,aa as te,ab as re,ac as de,ad as ce,ae as L,af as E,ag as oe,k as H,E as N}from"./client-LSARlrfQ.js";import{T as P}from"./trash-2-SYuB1gpe.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=Q("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),F=t.forwardRef(({className:n,...l},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:m("w-full caption-bottom text-sm",n),...l})}));F.displayName="Table";const U=t.forwardRef(({className:n,...l},i)=>e.jsx("thead",{ref:i,className:m("[&_tr]:border-b",n),...l}));U.displayName="TableHeader";const $=t.forwardRef(({className:n,...l},i)=>e.jsx("tbody",{ref:i,className:m("[&_tr:last-child]:border-0",n),...l}));$.displayName="TableBody";const xe=t.forwardRef(({className:n,...l},i)=>e.jsx("tfoot",{ref:i,className:m("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...l}));xe.displayName="TableFooter";const v=t.forwardRef(({className:n,...l},i)=>e.jsx("tr",{ref:i,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...l}));v.displayName="TableRow";const x=t.forwardRef(({className:n,...l},i)=>e.jsx("th",{ref:i,className:m("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...l}));x.displayName="TableHead";const h=t.forwardRef(({className:n,...l},i)=>e.jsx("td",{ref:i,className:m("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...l}));h.displayName="TableCell";const he=t.forwardRef(({className:n,...l},i)=>e.jsx("caption",{ref:i,className:m("mt-4 text-sm text-muted-foreground",n),...l}));he.displayName="TableCaption";const ue=({viewMode:n,onChange:l})=>e.jsxs("div",{className:"border rounded-md p-1 flex",children:[e.jsxs(c,{variant:n==="grid"?"default":"ghost",size:"sm",className:"rounded-sm",onClick:()=>l("grid"),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-0.5 h-3 w-3 mr-2",children:[e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"}),e.jsx("div",{className:"bg-current rounded-sm"})]}),"Grid"]}),e.jsxs(c,{variant:n==="table"?"default":"ghost",size:"sm",className:"rounded-sm",onClick:()=>l("table"),children:[e.jsxs("div",{className:"flex flex-col justify-between h-3 w-3 mr-2",children:[e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"}),e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"}),e.jsx("div",{className:"bg-current h-0.5 w-full rounded-sm"})]}),"Table"]})]}),G=[{id:"gpt-4o",name:"GPT-4o",enabled:!0},{id:"gpt-4o-mini",name:"GPT-4o Mini",enabled:!0},{id:"claude-3.5-sonnet",name:"Claude 3.5 Sonnet",enabled:!1},{id:"claude-3-opus",name:"Claude 3 Opus",enabled:!1},{id:"claude-3-haiku",name:"Claude 3 Haiku",enabled:!1},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",enabled:!1},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",enabled:!1}],ge=function(){const{data:l,isRefetching:i}=W(),d=l,[u,B]=t.useState([]),[Y,j]=t.useState(!1),[_,p]=t.useState(!1),[g,V]=t.useState(null),[y,w]=t.useState(!1),[C,Z]=t.useState("grid"),M=t.useMemo(()=>{const s=d?.members.map(r=>({id:r.id,invitationId:void 0,email:r.user.email,name:r.user.name,status:"accepted",role:r.role,models:G})),o=d?.invitations.filter(r=>r.status==="pending")?.map(r=>({id:void 0,invitationId:r.id,email:r.email,name:r.email.split("@")[0]??"Unkown Name",status:r.status,role:r.role,models:G}));return[...s??[],...o??[]]},[d]),q=async()=>{const s=u.filter(a=>d.invitations.some(o=>o.email.toLowerCase()===a.email.toLowerCase()&&o.status==="pending")||d.members.some(o=>o.user.email.toLowerCase()===a.email.toLowerCase()));if(s.length>0){let a=s.map(o=>o.email+", ").toString();a=a.substring(0,a.length-2),H.error(`You have already invited ${a}.`);return}w(!0),await Promise.all(u.map(async a=>{await N.inviteMember({email:a.email,role:a.role,organizationId:d.id})})),H.success(`${u.length} new invitations have been sent succesfully - wait for their acceptantance.`),w(!1),j(!1)},T=async(s,a)=>{s&&!a?await N.removeMember({memberIdOrEmail:s,organizationId:d.id}):a&&await N.cancelInvitation({invitationId:a})},J=s=>{},K=()=>{},I=s=>{V({...s}),p(!0)};return d?e.jsxs("div",{className:"space-y-6 m-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[d?.name+" - "," Team Members"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your organization's team members and their permissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{viewMode:C,onChange:Z}),e.jsxs(k,{open:Y,onOpenChange:j,children:[e.jsx(X,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Invite Member"]})}),e.jsxs(D,{className:"min-w-1/3 flex flex-col items-center",children:[e.jsx(A,{className:"text-center",children:"Invite new members"}),e.jsx(se,{invitees:u,setInvitees:B}),e.jsxs(z,{children:[e.jsx(c,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(c,{onClick:q,disabled:u.length===0||y,children:y?"Sending...":"Send Invitation"})]})]})]})]})]}),e.jsx(k,{open:_,onOpenChange:p,children:e.jsxs(D,{className:"sm:max-w-md",children:[e.jsxs(ae,{children:[e.jsx(A,{children:"AI Model Access"}),e.jsxs(le,{children:["Configure which AI models ",g?.name," can access"]})]}),e.jsx("div",{className:"space-y-4 py-2 max-h-[60vh] overflow-y-auto",children:g?.models.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:`model-${s.id}`,checked:s.enabled,onCheckedChange:()=>J(s.id)}),e.jsx(ie,{htmlFor:`model-${s.id}`,className:"cursor-pointer",children:s.name})]}),s.enabled?e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Enabled"}):e.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full",children:"Disabled"})]},s.id))}),e.jsxs(z,{children:[e.jsx(c,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(c,{onClick:K,children:"Save Changes"})]})]})}),C==="grid"?e.jsxs(f,{children:[e.jsxs(S,{children:[e.jsx(R,{children:"Team Members"}),e.jsxs(O,{children:["Your organization has ",d.members.length," members"]})]}),e.jsx(b,{children:e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 lg:grid-cols-3",children:M.map(s=>e.jsx(f,{className:"overflow-hidden border bg-background",children:e.jsx(b,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 text-primary",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.name," - ",s.email]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s.role}),s.status==="pending"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-0.5 rounded-full",children:"Pending"})]})]})]}),e.jsxs(te,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"icon",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Menu"})]})}),e.jsxs(de,{align:"end",children:[e.jsx(ce,{children:"Actions"}),e.jsxs(L,{onClick:()=>I(s),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Configure AI Models"]}),e.jsx(oe,{}),e.jsxs(L,{className:"text-destructive",onClick:()=>T(s.email,s.invitationId),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),s.status==="accepted"?"Remove Member":"Cancel invitation"]})]})]})]}),e.jsxs("div",{className:"border-t p-4 bg-muted/40",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"AI Models"}),e.jsxs("span",{className:"text-xs font-medium",children:[s.models.filter(a=>a.enabled).length," of ",s.models.length," enabled"]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.models.filter(a=>a.enabled).slice(0,3).map(a=>e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:a.name},a.id)),s.models.filter(a=>a.enabled).length>3&&e.jsxs("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:["+",s.models.filter(a=>a.enabled).length-3," more"]}),s.models.filter(a=>a.enabled).length===0&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"No models enabled"})]})]})]})})},s.email))})})]}):e.jsxs(f,{children:[e.jsxs(S,{children:[e.jsx(R,{children:"Team Members"}),e.jsxs(O,{children:["Your organization has ",d.members.length," members"]})]}),e.jsx(b,{children:e.jsxs(F,{children:[e.jsx(U,{children:e.jsxs(v,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Role"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"AI Models"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx($,{children:M.map(s=>e.jsxs(v,{children:[e.jsx(h,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary text-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("span",{children:[s.name," - ",s.email]})]})}),e.jsx(h,{children:s.role}),e.jsx(h,{children:s.status==="accepted"?e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-600 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-600 mr-1"}),"Pending"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.models.filter(a=>a.enabled).length}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"enabled"})]})}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>I(s),children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Configure AI Models"})]}),e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>T(s.email,s.invitationId),children:[e.jsx(P,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},s.id))})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-pulse",children:"Loading..."})})};export{ge as component};
