import{l as S,ac as k,r as s,u as L,ay as w,j as e,B as t,C as p,a as j,b as f,c,L as I,U as A,d as v,ah as z,g as M,ai as T,h as F,aL as C,k as h}from"./client-CMvCw2jp.js";import{D as E,b as H,d as U,f as B}from"./dialog-idyyqogp.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=S("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),G=function(){const{data:o,refetch:N}=k(),a=o,[i,m]=s.useState(""),[r,g]=s.useState(""),[x,d]=s.useState(!0),[y,l]=s.useState(!1);L();const{changeActiveOrganizationIfAny:O}=w();s.useEffect(()=>{o&&(m(a.name),g(JSON.parse(a.metadata).description),d(!1))},[o]);const b=async()=>{if(!i||!r){h.error("Organization name is required");return}d(!0);const{data:n,error:u}=await C.update({data:{name:i,metadata:{description:r}}});n?h.info("Organization credentials updated!"):u&&(h.error("Organization credentials could not be updated!"),console.error("Organization credentials could not be updated!",u)),N(),d(!1)},D=async()=>{await C.delete({organizationId:a.id}),O()};return a?e.jsxs("div",{className:"space-y-8 m-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Organization Settings - ",a?.name]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your organization preferences"})]}),e.jsx(E,{open:y,onOpenChange:l,children:e.jsxs(H,{children:[e.jsx(U,{children:"Confirm Deletion"}),e.jsx("p",{children:"Are you sure you want to delete this organization? This action cannot be undone."}),e.jsxs(B,{children:[e.jsx(t,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:()=>D(),children:"Delete Organization"})]})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{children:"General Information"}),e.jsx(c,{children:"Update your organization's basic details."}),e.jsxs(c,{children:[a?.name," has a total of ",a?.members.length??0," members and ",a.invitations.filter(n=>n.status==="pending").length??0," pending invitaitons."]})]}),e.jsx("div",{children:e.jsx(t,{children:e.jsxs(I,{className:"flex",to:"/members",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Manage members"})]})})})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"org-name",children:"Organization Name"}),e.jsx(M,{id:"org-name",maxLength:50,value:i,onChange:n=>m(n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{htmlFor:"org-description",children:"Description"}),e.jsx(T,{id:"org-description",value:r,maxLength:1e3,onChange:n=>g(n.target.value),rows:4})]})]}),e.jsx(F,{children:e.jsxs(t,{onClick:b,disabled:x||i===a.name&&r===JSON.parse(a.metadata??"{description: ''}").description,children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),x?"Saving...":"Save Changes"]})})]}),e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsx(f,{children:"Danger Zone"}),e.jsx(c,{children:"Irreversible actions for your organization"})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"rounded-lg border border-destructive/20 p-4",children:[e.jsx("h3",{className:"font-medium text-destructive",children:"Delete Organization"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"This action cannot be undone. All data will be permanently deleted."}),e.jsx(t,{variant:"destructive",className:"mt-4",onClick:()=>l(!0),children:"Delete Organization"})]})})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading..."})};export{G as component};
