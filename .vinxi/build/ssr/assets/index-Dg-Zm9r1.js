import{jsxs as e,jsx as t}from"react/jsx-runtime";import{useNavigate as z}from"@tanstack/react-router";import{toast as C}from"sonner";import{Plus as d,Check as w,Users as y}from"lucide-react";import{useState as b,useEffect as v}from"react";import{Y as O,A as M,B as n,C as l,d as p,a as j,b as k,c as S,h as A,a6 as h}from"./ssr-D494T9bW.js";import"jotai";import"@vercel/analytics";import"@tanstack/router-core";import"@tanstack/start-client-core";import"@tanstack/start-server-core";import"zod";import"@radix-ui/react-slot";import"class-variance-authority";import"clsx";import"tailwind-merge";import"@radix-ui/react-label";import"better-auth/react";import"better-auth/client/plugins";import"input-otp";import"@radix-ui/react-select";import"@radix-ui/react-tooltip";import"@radix-ui/react-radio-group";import"@radix-ui/react-scroll-area";import"framer-motion";import"motion/react";import"@radix-ui/react-dropdown-menu";import"uuid";import"marked";import"react-markdown";import"remark-gfm";import"@radix-ui/react-hover-card";import"qss";import"@radix-ui/react-dialog";import"tiny-invariant";import"node:stream";import"isbot";import"react-dom/server";const ft=function(){const{data:a}=O(),{data:o}=M(),m=z(),[u,g]=b(new Map);v(()=>{if(!a)return;(async()=>{const N=await Promise.all(a?.map(async r=>{const s=await h.getFullOrganization({query:{organizationId:r.id}});return{id:r.id,memberCount:(s.data?.members||[]).length}})),x=new Map(N.map(({id:r,memberCount:s})=>[r,s]));g(x)})()},[a]);const c=()=>{m({to:"/create-organization"})},f=async i=>{await h.setActive({organizationId:i}),C.success("Organization switched successfully"),m({to:"/chat",reloadDocument:!0})};return e("div",{className:"space-y-8 m-4",children:[e("div",{className:"flex items-center justify-between",children:[e("div",{children:[t("h1",{className:"text-3xl font-bold tracking-tight",children:"Organizations"}),t("p",{className:"text-muted-foreground mt-1",children:"Manage your organizations and teams"})]}),e(n,{onClick:c,children:[t(d,{className:"mr-2 h-4 w-4"}),"New Organization"]})]}),a?.length===0?t(l,{className:"m-4",children:e(p,{className:"flex flex-col items-center justify-center py-12",children:[t("p",{className:"mb-4 text-muted-foreground text-center",children:"You don't have any organizations yet"}),e(n,{onClick:c,children:[t(d,{className:"mr-2 h-4 w-4"}),"Create your first organization"]})]})}):t("div",{className:"grid gap-6 m-8 sm:grid-cols-2 lg:grid-cols-3",children:a?.map(i=>e(l,{className:`transition-all ${o?.id===i.id?"border-primary":""}`,children:[e(j,{children:[e("div",{className:"flex items-start justify-between",children:[t(k,{children:i.name}),o?.id===i.id&&t("div",{className:"rounded-full bg-primary/10 p-1",children:t(w,{className:"h-4 w-4 text-primary"})})]}),e(S,{children:["Created on ",new Date(i.createdAt).toLocaleDateString()]})]}),e(p,{children:[t("p",{className:"text-sm text-muted-foreground",children:i.description||"No description provided"}),e("div",{className:"mt-4 flex items-center text-sm",children:[t(y,{className:"mr-1 h-4 w-4 text-muted-foreground"}),e("span",{children:[u.get(i.id)," members"]})]})]}),t(A,{children:o?.id===i.id?t(n,{variant:"outline",className:"w-full",disabled:!0,children:"Current Organization"}):t(n,{className:"w-full",onClick:()=>f(i.id),children:"Switch to this organization"})})]},i.id))})]})};export{ft as component};
