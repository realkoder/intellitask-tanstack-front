import{jsx as r,jsxs as v,Fragment as xe}from"react/jsx-runtime";import{RouterProvider as ze,useRouter as Ve,useMatch as Je,rootRouteId as Ke,ErrorComponent as Qe,Link as ne,createRootRoute as Xe,Outlet as Ye,HeadContent as Ze,Scripts as et,createFileRoute as Q,lazyRouteComponent as pe,createRouter as tt}from"@tanstack/react-router";import{TanStackRouterDevtools as nt}from"@tanstack/react-router-devtools";import*as X from"react";import q,{memo as Y,useRef as A,useCallback as D,useEffect as H,useLayoutEffect as at,createContext as rt,useState as P,useContext as Ce,useMemo as st,isValidElement as ot,Suspense as it,forwardRef as ct}from"react";import{v4 as ye}from"uuid";import{AnimatePresence as lt,motion as dt}from"framer-motion";import{Slot as ut}from"@radix-ui/react-slot";import{cva as Z}from"class-variance-authority";import{clsx as ht}from"clsx";import{twMerge as pt}from"tailwind-merge";import{animate as mt}from"motion/react";import{ArrowUpIcon as ft,AudioLines as gt,SparklesIcon as yt,UserIcon as bt,ChevronDown as vt}from"lucide-react";import{marked as wt}from"marked";import xt from"react-markdown";import Ct from"remark-gfm";import*as M from"@radix-ui/react-scroll-area";import{createAuthClient as St}from"better-auth/react";import{organizationClient as kt,adminClient as Nt}from"better-auth/client/plugins";import Tt from"tiny-invariant";import{PassThrough as At}from"node:stream";import{isbot as be}from"isbot";import V from"react-dom/server";import{defineHandlerCallback as It,transformReadableStreamWithRouter as Rt,transformPipeableStreamWithRouter as Pt,createStartHandler as Et}from"@tanstack/start-server-core";function ve(e){return r(ze,{router:e.router})}const _t=It(async({request:e,router:n,responseHeaders:a})=>{if(typeof V.renderToReadableStream=="function"){const t=await V.renderToReadableStream(r(ve,{router:n}),{signal:e.signal});be(e.headers.get("User-Agent"))&&await t.allReady;const s=Rt(n,t);return new Response(s,{status:n.state.statusCode,headers:a})}if(typeof V.renderToPipeableStream=="function"){const t=new At;try{const o=V.renderToPipeableStream(r(ve,{router:n}),{...be(e.headers.get("User-Agent"))?{onAllReady(){o.pipe(t)}}:{onShellReady(){o.pipe(t)}},onError:(c,u)=>{console.error("Error in renderToPipeableStream:",c,u)}})}catch(o){console.error("Error in renderToPipeableStream:",o)}const s=Pt(n,t);return new Response(s,{status:n.state.statusCode,headers:a})}throw new Error("No renderToReadableStream or renderToPipeableStream found in react-dom/server. Ensure you are using a version of react-dom that supports streaming.")}),Ut=()=>({routes:{__root__:{filePath:"__root.tsx",children:["/","/_layout","/login"],preloads:["/_build/assets/client-B1AyRAtV.js","/_build/assets/client-DurI-GfG.js"]},"/":{filePath:"index.tsx"},"/_layout":{filePath:"_layout.tsx",children:["/_layout/chat/"]},"/login":{filePath:"login.tsx"},"/_layout/chat/":{filePath:"_layout/chat/index.tsx",parent:"/_layout"}}});function Lt(e){return globalThis.MANIFEST[e]}function jt(){const e=Ut(),n=e.routes.__root__=e.routes.__root__||{};n.assets=n.assets||[];let a="";const t=Lt("client"),s=t.inputs[t.handler]?.output.path;return s||Tt(s,"Could not find client entry in vinxi manifest"),n.assets.push({tag:"script",attrs:{type:"module",suppressHydrationWarning:!0,async:!0},children:`${a}import("${s}")`}),e}function Mt(){const e=jt();return{...e,routes:Object.fromEntries(Object.entries(e.routes).map(([n,a])=>{const{preloads:t,assets:s}=a;return[n,{preloads:t,assets:s}]}))}}const Ot="/_build/assets/app-Cs9mLtrU.css",$t="/_build/assets/index-BWUNYehG.css";function Dt({error:e}){const n=Ve(),a=Je({strict:!1,select:t=>t.id===Ke});return console.error(e),v("div",{className:"min-w-0 flex-1 p-4 flex flex-col items-center justify-center gap-6",children:[r(Qe,{error:e}),v("div",{className:"flex gap-2 items-center flex-wrap",children:[r("button",{onClick:()=>{n.invalidate()},className:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",children:"Try Again"}),a?r(ne,{to:"/home",className:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",children:"Home"}):r(ne,{to:"/home",className:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",onClick:t=>{t.preventDefault(),window.history.back()},children:"Go Back"})]})]})}function Ht({children:e}){return v("div",{className:"space-y-2 p-2",children:[r("div",{className:"text-gray-600 dark:text-gray-400",children:e||r("p",{children:"The page you are looking for does not exist."})}),v("p",{className:"flex items-center gap-2 flex-wrap",children:[r("button",{onClick:()=>window.history.back(),className:"bg-emerald-500 text-white px-2 py-1 rounded uppercase font-black text-sm",children:"Go back"}),r(ne,{to:"/home",className:"bg-cyan-600 text-white px-2 py-1 rounded uppercase font-black text-sm",children:"Start Over"})]})]})}const ee=Xe({head:()=>({meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{title:"TanStack Start Starter"}],links:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"},{rel:"stylesheet",href:Ot},{rel:"stylesheet",href:$t}]}),errorComponent:e=>r(Se,{children:r(Dt,{...e})}),notFoundComponent:()=>r(Ht,{}),component:Gt});function Gt(){return r(Se,{children:r(Ye,{})})}function Se({children:e}){return v("html",{children:[r("head",{children:r(Ze,{})}),v("body",{children:[e,r(nt,{position:"bottom-right"}),r(et,{})]})]})}const Bt=()=>import("./login-Ck_xKl4z.js"),ke=Q("/login")({component:pe(Bt,"component",()=>ke.ssr)}),Ft=()=>import("./_layout-C0-Ejm-I.js"),Ne=Q("/_layout")({component:pe(Ft,"component",()=>Ne.ssr)}),Wt=()=>import("./index-BsurgMbl.js"),Te=Q("/")({component:pe(Wt,"component",()=>Te.ssr)});function g(...e){return pt(ht(e))}const qt=Z("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),W=X.forwardRef(({className:e,variant:n,size:a,asChild:t=!1,...s},o)=>r(t?ut:"button",{className:g(qt({variant:n,size:a,className:e})),ref:o,...s}));W.displayName="Button";const Ae=Y(({blur:e=0,inactiveZone:n=.7,proximity:a=0,spread:t=20,variant:s="default",glow:o=!1,className:c,movementDuration:u=2,borderWidth:h=1,disabled:l=!0})=>{const y=A(null),d=A({x:0,y:0}),i=A(0),p=D(m=>{y.current&&(i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{const f=y.current;if(!f)return;const{left:w,top:R,width:E,height:I}=f.getBoundingClientRect(),L=m?.x??d.current.x,k=m?.y??d.current.y;m&&(d.current={x:L,y:k});const O=[w+E*.5,R+I*.5],te=Math.hypot(L-O[0],k-O[1]),G=.5*Math.min(E,I)*n;if(te<G){f.style.setProperty("--active","0");return}const z=L>w-a&&L<w+E+a&&k>R-a&&k<R+I+a;if(f.style.setProperty("--active",z?"1":"0"),!z)return;const B=parseFloat(f.style.getPropertyValue("--start"))||0,b=(180*Math.atan2(k-O[1],L-O[0])/Math.PI+90-B+180)%360-180,x=B+b;mt(B,x,{duration:u,ease:[.16,1,.3,1],onUpdate:N=>{f.style.setProperty("--start",String(N))}})}))},[n,a,u]);return H(()=>{if(l)return;const m=()=>p(),f=w=>p(w);return window.addEventListener("scroll",m,{passive:!0}),document.body.addEventListener("pointermove",f,{passive:!0}),()=>{i.current&&cancelAnimationFrame(i.current),window.removeEventListener("scroll",m),document.body.removeEventListener("pointermove",f)}},[p,l]),v(xe,{children:[r("div",{className:g("pointer-events-none absolute -inset-px hidden rounded-[inherit] border opacity-0 transition-opacity",o&&"opacity-100",s==="white"&&"border-white",l&&"!block")}),r("div",{ref:y,style:{"--blur":`${e}px`,"--spread":t,"--start":"0","--active":"0","--glowingeffect-border-width":`${h}px`,"--repeating-conic-gradient-times":"5","--gradient":s==="white"?`repeating-conic-gradient(
                  from 236.84deg at 50% 50%,
                  var(--black),
                  var(--black) calc(25% / var(--repeating-conic-gradient-times))
                )`:`radial-gradient(circle, #dd7bbb 10%, #dd7bbb00 20%),
                radial-gradient(circle at 40% 40%, #d79f1e 5%, #d79f1e00 15%),
                radial-gradient(circle at 60% 60%, #5a922c 10%, #5a922c00 20%), 
                radial-gradient(circle at 40% 60%, #4c7894 10%, #4c789400 20%),
                repeating-conic-gradient(
                  from 236.84deg at 50% 50%,
                  #dd7bbb 0%,
                  #d79f1e calc(25% / var(--repeating-conic-gradient-times)),
                  #5a922c calc(50% / var(--repeating-conic-gradient-times)), 
                  #4c7894 calc(75% / var(--repeating-conic-gradient-times)),
                  #dd7bbb calc(100% / var(--repeating-conic-gradient-times))
                )`},className:g("pointer-events-none absolute inset-0 rounded-[inherit] opacity-100 transition-opacity",o&&"opacity-100",e>0&&"blur-[var(--blur)] ",c,l&&"!hidden"),children:r("div",{className:g("glow","rounded-[inherit]",'after:content-[""] after:rounded-[inherit] after:absolute after:inset-[calc(-1*var(--glowingeffect-border-width))]',"after:[border:var(--glowingeffect-border-width)_solid_transparent]","after:[background:var(--gradient)] after:[background-attachment:fixed]","after:opacity-[var(--active)] after:transition-opacity after:duration-300","after:[mask-clip:padding-box,border-box]","after:[mask-composite:intersect]","after:[mask-image:linear-gradient(#0000,#0000),conic-gradient(from_calc((var(--start)-var(--spread))*1deg),#00000000_0deg,#fff,#00000000_calc(var(--spread)*2deg))]")})})]})});Ae.displayName="GlowingEffect";const Ie=X.forwardRef(({className:e,...n},a)=>r("textarea",{className:g("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...n}));Ie.displayName="Textarea";function zt(e,n=1){const a=A(null);return at(()=>{const t=a.current;if(t){const s=window.getComputedStyle(t),o=Number.parseInt(s.lineHeight,10)||20,c=Number.parseInt(s.paddingTop,10)+Number.parseInt(s.paddingBottom,10),u=o*n+c;t.style.height="0px";const h=Math.max(t.scrollHeight,u);t.style.height=`${h+2}px`}},[a,e,n]),a}const me=rt({}),we=["What's the first rule of Fight Club?","Who is Tyler Durden?","Where is Andrew Laeddis Hiding?","Write a Javascript method to reverse a string","How to assemble your own PC?","Explain quantum computing in simple terms","Write a short story about a robot that falls in love","What are the ethical implications of AI?","Design a database schema for a social media app","Explain how blockchain works to a 5-year-old","Create a regex for validating email addresses","What's the difference between REST and GraphQL?","Suggest five names for my tech startup","How would you implement a binary search tree?","Explain the concept of recursion with an example","Write a haiku about coding at midnight","What's the significance of P vs NP problem?","How does natural language processing work?","Explain the CAP theorem in distributed systems","Design a simple chatbot algorithm","What are the pros and cons of microservices?","How would you optimize a slow-loading website?","Explain neural networks without technical jargon","What is technical debt and how do you manage it?","Write a function to detect a palindrome"];function Re({children:e,className:n,variant:a="default",value:t,onChange:s,onSubmit:o,loading:c,onStop:u,rows:h=1,hasMessages:l=!1}){const[y,d]=P(0),i=A(null),p=()=>{i.current=setInterval(()=>{d(w=>(w+1)%we.length)},4e3)},m=()=>{document.visibilityState!=="visible"&&i.current?(clearInterval(i.current),i.current=null):document.visibilityState==="visible"&&!l&&p()};H(()=>(l||p(),document.addEventListener("visibilitychange",m),()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",m)}),[l]),H(()=>{l&&i.current?(clearInterval(i.current),i.current=null):!l&&!i.current&&p()},[l]);const f={value:t,onChange:s,onSubmit:o,loading:c,onStop:u,variant:a,rows:h,placeholder:l?"Type a message...":we[y],hasMessages:l};return r(me.Provider,{value:f,children:v("div",{className:g("relative",a==="default"&&"flex flex-col items-end w-full p-2 rounded-2xl border border-input bg-transparent focus-within:ring-1 focus-within:ring-slate-300 focus-within:outline-none",a==="unstyled"&&"flex items-start gap-2 w-full",n),children:[r(Ae,{blur:0,borderWidth:1.7,spread:25,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),r("div",{className:"relative flex flex-col items-end w-full z-10",children:e})]})})}Re.displayName="ChatInput";function Pe({onSubmit:e,value:n,onChange:a,className:t,variant:s,...o}){const c=Ce(me),[u,h]=P(""),l=n??c.value??u,y=a??c.onChange,d=e??c.onSubmit,i=c.rows??1,p=c.placeholder||"",m=c.hasMessages||!1,[f,w]=P(!1),R=A(null),E=A(null),I=A([]),L=s??(c.variant==="default"?"unstyled":"default"),k=zt(l,i),O=D(b=>{k&&(typeof k=="function"?k(b):"current"in k&&(k.current=b)),E.current=b},[k]),te=b=>{if(!(!d||f)&&b.key==="Enter"&&!b.shiftKey){if(typeof l!="string"||l.trim().length===0)return;b.preventDefault(),B()}},G=D(()=>{if(!E.current)return;const b=R.current;if(!b)return;const x=b.getContext("2d");if(!x)return;b.width=800,b.height=800,x.clearRect(0,0,800,800);const N=getComputedStyle(E.current),F=parseFloat(N.getPropertyValue("font-size"));x.font=`${F*2}px ${N.fontFamily}`,x.fillStyle="#FFF",x.fillText(l,16,40);const C=x.getImageData(0,0,800,800).data,S=[];for(let U=0;U<800;U++){let $=4*U*800;for(let T=0;T<800;T++){let j=$+4*T;C[j]!==0&&C[j+1]!==0&&C[j+2]!==0&&S.push({x:T,y:U,color:[C[j],C[j+1],C[j+2],C[j+3]]})}}I.current=S.map(({x:U,y:$,color:T})=>({x:U,y:$,r:1,color:`rgba(${T[0]}, ${T[1]}, ${T[2]}, ${T[3]})`}))},[l]);H(()=>{f&&G()},[f,G]);const z=b=>{const x=(N=0)=>{requestAnimationFrame(()=>{const F=[];for(let C=0;C<I.current.length;C++){const S=I.current[C];if(S.x<N)F.push(S);else{if(S.r<=0){S.r=0;continue}S.x+=Math.random()>.5?1:-1,S.y+=Math.random()>.5?1:-1,S.r-=.05*Math.random(),F.push(S)}}I.current=F;const _=R.current?.getContext("2d");_&&(_.clearRect(N,0,800,800),I.current.forEach(C=>{const{x:S,y:U,r:$,color:T}=C;S>N&&(_.beginPath(),_.rect(S,U,$,$),_.fillStyle=T,_.strokeStyle=T,_.stroke())})),I.current.length>0?x(N-8):(y?y({target:{value:""}}):h(""),w(!1))})};x(b)},B=()=>{if(w(!0),G(),l&&E.current){const b=I.current.reduce((x,N)=>N.x>x?N.x:x,0);z(b),d&&setTimeout(()=>d(),50)}},ge=b=>{f||(y?y(b):h(b.target.value))};return v("div",{className:"relative w-full",children:[r("canvas",{className:g("absolute pointer-events-none text-base transform scale-50 top-[20%] left-2 origin-top-left filter invert dark:invert-0",f?"opacity-100":"opacity-0"),ref:R}),r(Ie,{ref:O,...o,value:l,onChange:ge,onKeyDown:te,className:g("max-h-[400px] min-h-0 resize-none overflow-x-hidden",L==="unstyled"&&"border-none focus-visible:ring-0 focus-visible:ring-offset-0 shadow-none",f&&"text-transparent dark:text-transparent",t),rows:i,placeholder:void 0}),!l&&r("div",{className:"absolute pointer-events-none top-0 left-0 right-0 bottom-0 flex items-center px-3 py-2",children:r(lt,{mode:"wait",children:m?r("span",{className:"text-muted-foreground truncate",children:p}):r(dt.span,{initial:{opacity:0,y:-5},animate:{opacity:.5,y:0},exit:{opacity:0,y:5},transition:{duration:.3},className:"text-muted-foreground truncate",children:p},p)})})]})}Pe.displayName="ChatInputTextArea";function Ee({onSubmit:e,loading:n,onStop:a,className:t,...s}){const o=Ce(me),c=n??o.loading,u=a??o.onStop,h=e??o.onSubmit;if(c&&u)return r(W,{onClick:u,className:g("shrink-0 rounded-full p-1.5 h-fit border dark:border-zinc-600 hover:cursor-pointer",t),...s,children:v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-label":"Stop",children:[r("title",{children:"Stop"}),r("rect",{x:"6",y:"6",width:"12",height:"12"})]})});const l=typeof o.value!="string"||o.value.trim().length===0,y=o.audio;return v("div",{className:"flex gap-1",children:[r(W,{className:g("shrink-0 rounded-full p-1.5 h-fit border dark:border-zinc-600 hover:cursor-pointer",t),disabled:l,onClick:d=>{d.preventDefault(),l||h?.()},...s,children:r(ft,{})}),r(W,{className:g("shrink-0 rounded-full p-1.5 h-fit border bg-red-500 hover:bg-red-600/95! dark:border-zinc-600 hover:cursor-pointer",t),disabled:y,onClick:d=>{d.preventDefault(),l||h?.()},...s,children:r(gt,{})})]})}Ee.displayName="ChatInputSubmit";const ae="my-4 overflow-x-auto w-fit rounded-xl bg-zinc-950 text-zinc-50 dark:bg-zinc-900 border border-border p-4",re=e=>typeof e=="string"?e:Array.isArray(e)?e.map(re).join(""):ot(e)?re(e.props.children):"",_e=Y(async({children:e,className:n,language:a,...t})=>{const{codeToTokens:s,bundledLanguages:o}=await import("shiki"),c=re(e);if(!(a in o))return r("pre",{...t,className:g(ae,n),children:r("code",{className:"whitespace-pre-wrap",children:e})});const{tokens:u}=await s(c,{lang:a,themes:{light:"github-dark",dark:"github-dark"}});return r("pre",{...t,className:g(ae,n),children:r("code",{className:"whitespace-pre-wrap",children:u.map((h,l)=>v("span",{children:[h.map((y,d)=>{const i=typeof y.htmlStyle=="string"?void 0:y.htmlStyle;return r("span",{style:i,children:y.content},`token-${d}`)}),l!==u.length-1&&`
`]},`line-${l}`))})})});_e.displayName="HighlightedPre";const Ue=({children:e,language:n,className:a,...t})=>r(it,{fallback:r("pre",{...t,className:g(ae,a),children:r("code",{className:"whitespace-pre-wrap",children:e})}),children:r(_e,{language:n,...t,children:e})});Ue.displayName="CodeBlock";const Vt={h1:({children:e,...n})=>r("h1",{className:"mt-2 scroll-m-20 text-4xl font-bold",...n,children:e}),h2:({children:e,...n})=>r("h2",{className:"mt-8 scroll-m-20 border-b pb-2 text-2xl font-semibold tracking-tight first:mt-0",...n,children:e}),h3:({children:e,...n})=>r("h3",{className:"mt-4 scroll-m-20 text-xl font-semibold tracking-tight",...n,children:e}),h4:({children:e,...n})=>r("h4",{className:"mt-4 scroll-m-20 text-lg font-semibold tracking-tight",...n,children:e}),h5:({children:e,...n})=>r("h5",{className:"mt-4 scroll-m-20 text-lg font-semibold tracking-tight",...n,children:e}),h6:({children:e,...n})=>r("h6",{className:"mt-4 scroll-m-20 text-base font-semibold tracking-tight",...n,children:e}),p:({children:e,...n})=>r("p",{className:"leading-6 [&:not(:first-child)]:mt-4",...n,children:e}),strong:({children:e,...n})=>r("span",{className:"font-semibold",...n,children:e}),a:({children:e,...n})=>r("a",{className:"font-medium underline underline-offset-4",target:"_blank",rel:"noreferrer",...n,children:e}),ol:({children:e,...n})=>r("ol",{className:"my-4 ml-6 list-decimal",...n,children:e}),ul:({children:e,...n})=>r("ul",{className:"my-4 ml-6 list-disc",...n,children:e}),li:({children:e,...n})=>r("li",{className:"mt-2",...n,children:e}),blockquote:({children:e,...n})=>r("blockquote",{className:"mt-4 border-l-2 pl-6 italic",...n,children:e}),hr:e=>r("hr",{className:"my-4 md:my-8",...e}),table:({children:e,...n})=>r("div",{className:"my-6 w-full overflow-y-auto",children:r("table",{className:"relative w-full overflow-hidden border-none text-sm",...n,children:e})}),tr:({children:e,...n})=>r("tr",{className:"last:border-b-none m-0 border-b",...n,children:e}),th:({children:e,...n})=>r("th",{className:"px-4 py-2 text-left font-bold [&[align=center]]:text-center [&[align=right]]:text-right",...n,children:e}),td:({children:e,...n})=>r("td",{className:"px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right",...n,children:e}),img:({alt:e,...n})=>r("img",{className:"rounded-md",alt:e,...n}),code:({children:e,node:n,className:a,...t})=>{const s=/language-(\w+)/.exec(a||"");return s?r(Ue,{language:s[1],className:a,...t,children:e}):r("code",{className:g("rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm",a),...t,children:e})},pre:({children:e})=>r(xe,{children:e})};function Jt(e){return e?wt.lexer(e).map(a=>a.raw):[]}const Le=Y(({content:e,className:n})=>r(xt,{remarkPlugins:[Ct],components:Vt,className:n,children:e}),(e,n)=>e.content===n.content);Le.displayName="MemoizedMarkdownBlock";const je=Y(({content:e,id:n,className:a})=>st(()=>Jt(e||""),[e]).map((s,o)=>r(Le,{content:s,className:a},`${n}-block_${o}`)));je.displayName="MarkdownContent";const Kt=Z("flex gap-4 w-full",{variants:{variant:{default:"",bubble:"",full:"p-5"},type:{incoming:"justify-start mr-auto",outgoing:"justify-end ml-auto"}},compoundVariants:[{variant:"full",type:"outgoing",className:"bg-muted"},{variant:"full",type:"incoming",className:"bg-background"}],defaultVariants:{variant:"default",type:"incoming"}}),Me=q.createContext(null),Oe=()=>q.useContext(Me),se=q.forwardRef(({className:e,variant:n="default",type:a="incoming",id:t,children:s,...o},c)=>r(Me.Provider,{value:{variant:n,type:a,id:t},children:r("div",{ref:c,className:g(Kt({variant:n,type:a,className:e})),...o,children:s})}));se.displayName="ChatMessage";const Qt=Z("w-8 h-8 flex items-center rounded-full justify-center ring-1 shrink-0 bg-transparent overflow-hidden",{variants:{type:{incoming:"ring-border",outgoing:"ring-muted-foreground/30"}},defaultVariants:{type:"incoming"}}),$e=q.forwardRef(({className:e,icon:n,imageSrc:a,...t},s)=>{const c=Oe()?.type??"incoming",u=n??(c==="incoming"?r(yt,{}):r(bt,{}));return r("div",{ref:s,className:g(Qt({type:c,className:e})),...t,children:a?r("img",{src:a,alt:"Avatar",className:"h-full w-full object-cover"}):r("div",{className:"translate-y-px [&_svg]:size-4 [&_svg]:shrink-0",children:u})})});$e.displayName="ChatMessageAvatar";const Xt=Z("flex flex-col gap-2",{variants:{variant:{default:"",bubble:"rounded-xl px-3 py-2",full:""},type:{incoming:"",outgoing:""}},compoundVariants:[{variant:"bubble",type:"incoming",className:"bg-secondary text-secondary-foreground"},{variant:"bubble",type:"outgoing",className:"bg-primary text-primary-foreground"}],defaultVariants:{variant:"default",type:"incoming"}}),oe=q.forwardRef(({className:e,content:n,id:a,children:t,...s},o)=>{const c=Oe(),u=c?.variant??"default",h=c?.type??"incoming",l=a??c?.id??"";return v("div",{ref:o,className:g(Xt({variant:u,type:h,className:e})),...s,children:[n.length>0&&r(je,{id:l,content:n}),t]})});oe.displayName="ChatMessageContent";const De=X.forwardRef(({className:e,children:n,...a},t)=>v(M.Root,{ref:t,className:g("relative overflow-hidden",e),...a,children:[r(M.Viewport,{className:"h-full w-full rounded-[inherit]",children:n}),r(He,{}),r(M.Corner,{})]}));De.displayName=M.Root.displayName;const He=X.forwardRef(({className:e,orientation:n="vertical",...a},t)=>r(M.ScrollAreaScrollbar,{ref:t,orientation:n,className:g("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:r(M.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));He.displayName=M.ScrollAreaScrollbar.displayName;function Yt(){const e=A(null),[n,a]=P(!1),[t,s]=P(!0),o=A(!1),c=A(!1),u=D(d=>d?.closest("[data-radix-scroll-area-viewport]"),[]),h=D(d=>{const{scrollTop:i,scrollHeight:p,clientHeight:m}=d;return Math.abs(p-i-m)<10},[]),l=D(d=>{const{scrollHeight:i,clientHeight:p}=d,m=i>p,f=h(d);a(m&&!f),o.current||s(f)},[h]);return H(()=>{const d=e.current,i=u(d);if(!d||!i)return;l(i);const p=()=>{o.current||l(i)},m=()=>{o.current=!0},f=()=>{o.current=!1,l(i)};let w;const R=new MutationObserver(()=>{c.current=!0,window.clearTimeout(w),t&&!o.current&&i.scrollTo({top:i.scrollHeight,behavior:"instant"}),l(i),w=window.setTimeout(()=>{c.current=!1},100)});return i.addEventListener("scroll",p,{passive:!0}),i.addEventListener("touchstart",m),i.addEventListener("touchend",f),R.observe(d,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{window.clearTimeout(w),R.disconnect(),i.removeEventListener("scroll",p),i.removeEventListener("touchstart",m),i.removeEventListener("touchend",f)}},[u,l,t]),[e,n,()=>{const d=u(e.current);d&&(s(!0),d.scrollTo({top:d.scrollHeight,behavior:c.current?"instant":"smooth"}))}]}function Zt({onClick:e,alignment:n="right",className:a}){return r(W,{variant:"secondary",size:"icon",className:g("absolute bottom-4 rounded-full shadow-lg hover:bg-secondary",{left:"left-4",center:"left-1/2 -translate-x-1/2",right:"right-4"}[n],a),onClick:e,children:r(vt,{className:"h-4 w-4"})})}const Ge=ct(({children:e,className:n,scrollButtonAlignment:a="right"},t)=>{const[s,o,c]=Yt();return v(De,{className:"flex-1 relative",ref:t,children:[r("div",{ref:s,children:r("div",{className:g(n,"min-h-0"),children:e})}),o&&r(Zt,{onClick:c,alignment:a,className:"absolute bottom-4 rounded-full shadow-lg hover:bg-secondary"})]})});Ge.displayName="ChatMessageArea";function Be(e){return`https://${e}-intellitask-yrr2.encr.app`}class en{agents;chatrooms;chats;openai;payments;users;constructor(n,a){const t=new on(n,a??{});this.agents=new ie.ServiceClient(t),this.chatrooms=new ce.ServiceClient(t),this.chats=new le.ServiceClient(t),this.openai=new de.ServiceClient(t),this.payments=new ue.ServiceClient(t),this.users=new he.ServiceClient(t)}}var ie;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async createAgent(t){return await(await this.baseClient.callTypedAPI("POST","/agent",JSON.stringify(t))).json()}async deleteAgent(t){await this.baseClient.callTypedAPI("DELETE",`/agent/${encodeURIComponent(t)}`)}async getAgent(t){return await(await this.baseClient.callTypedAPI("GET",`/agent/${encodeURIComponent(t)}`)).json()}async getPublicAgents(){return await(await this.baseClient.callTypedAPI("GET","/agents")).json()}async updateAgent(t,s){await this.baseClient.callTypedAPI("PATCH",`/agent/${encodeURIComponent(t)}`,JSON.stringify(s))}}e.ServiceClient=n})(ie||(ie={}));var ce;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async createChatroom(t){return await(await this.baseClient.callTypedAPI("POST","/chatrooms",JSON.stringify(t))).json()}async createTeam(t){return await(await this.baseClient.callTypedAPI("POST","/teams",JSON.stringify(t))).json()}async deleteChatroom(t){await this.baseClient.callTypedAPI("DELETE",`/chatrooms/${encodeURIComponent(t)}`)}async deleteTeam(t){await this.baseClient.callTypedAPI("DELETE",`/teams/${encodeURIComponent(t)}`)}async getChatroom(t){return await(await this.baseClient.callTypedAPI("GET",`/chatrooms/${encodeURIComponent(t)}`)).json()}async getChatrooms(){return await(await this.baseClient.callTypedAPI("GET","/chatrooms")).json()}async getTeam(t){return await(await this.baseClient.callTypedAPI("GET",`/teams/${encodeURIComponent(t)}`)).json()}async updateChatroom(t,s){await this.baseClient.callTypedAPI("PATCH",`/chatrooms/${encodeURIComponent(t)}`,JSON.stringify(s))}async updateTeam(t,s){await this.baseClient.callTypedAPI("PATCH",`/teams/${encodeURIComponent(t)}`,JSON.stringify(s))}}e.ServiceClient=n})(ce||(ce={}));var le;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async chat(t){const s=Fe({chatroomId:t.chatroomId,userId:t.userId});return await this.baseClient.createStreamInOut("/chat",{query:s})}}e.ServiceClient=n})(le||(le={}));var de;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async getCommunicationCoach(){return await(await this.baseClient.callTypedAPI("GET","/communication-coach")).json()}async getDataAnalyst(){return await(await this.baseClient.callTypedAPI("GET","/data-analyst")).json()}async getFinancialAdvisor(){return await(await this.baseClient.callTypedAPI("GET","/financial-advisor")).json()}async getHRConsultant(){return await(await this.baseClient.callTypedAPI("GET","/hr-consultant")).json()}async getInnovationConsultant(){return await(await this.baseClient.callTypedAPI("GET","/innovation-consultant")).json()}async getLegalAdvisor(){return await(await this.baseClient.callTypedAPI("GET","/legal-advisor")).json()}async getMarketingAdvisor(){return await(await this.baseClient.callTypedAPI("GET","/marketing-advisor")).json()}async getProductivityCoach(){return await(await this.baseClient.callTypedAPI("GET","/productivity-coach")).json()}async getProjectManager(){return await(await this.baseClient.callTypedAPI("GET","/project-manager")).json()}async getSupervisor(){return await(await this.baseClient.callTypedAPI("GET","/supervisor")).json()}async getTechAdvisor(){return await(await this.baseClient.callTypedAPI("GET","/tech-advisor")).json()}async getWellnessCoach(){return await(await this.baseClient.callTypedAPI("GET","/wellness-coach")).json()}async openaiStream(t,s,o){return this.baseClient.callAPI(t,"/stream-chat",s,o)}}e.ServiceClient=n})(de||(de={}));var ue;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async cancelSubscription(t){await this.baseClient.callTypedAPI("POST",`/cancel-subscription/${encodeURIComponent(t)}`)}async checkoutStripeSession(t,s,o,c){return this.baseClient.callAPI(t,`/create-subscription/${encodeURIComponent(s)}`,o,c)}async stripeWebhook(t,s,o){return this.baseClient.callAPI(t,"/stripe-webhook",s,o)}}e.ServiceClient=n})(ue||(ue={}));var he;(e=>{class n{baseClient;constructor(t){this.baseClient=t}async createUser(t,s,o){return this.baseClient.callAPI(t,"/users",s,o)}async deleteUser(t){await this.baseClient.callTypedAPI("DELETE",`/users/${encodeURIComponent(t)}`)}async findUser(t){return await(await this.baseClient.callTypedAPI("GET",`/users/${encodeURIComponent(t)}`)).json()}async updateUser(t,s){await this.baseClient.callTypedAPI("PUT",`/users/${encodeURIComponent(t)}`,JSON.stringify(s))}}e.ServiceClient=n})(he||(he={}));function J(e){const n=[];for(const a in e){const t=Array.isArray(e[a])?e[a]:[e[a]];for(const s of t)n.push(`${a}=${encodeURIComponent(s)}`)}return n.join("&")}function Fe(e){for(const n in e)e[n]===void 0&&delete e[n];return e}function tn(e){return"encore.dev.headers."+btoa(JSON.stringify(e)).replaceAll("=","").replaceAll("+","-").replaceAll("/","_")}class fe{ws;hasUpdateHandlers=[];constructor(n,a){let t=["encore-ws"];a&&t.push(tn(a)),this.ws=new WebSocket(n,t),this.on("error",()=>{this.resolveHasUpdateHandlers()}),this.on("close",()=>{this.resolveHasUpdateHandlers()})}resolveHasUpdateHandlers(){const n=this.hasUpdateHandlers;this.hasUpdateHandlers=[];for(const a of n)a()}async hasUpdate(){await new Promise(n=>{this.hasUpdateHandlers.push(()=>n(null))})}on(n,a){this.ws.addEventListener(n,a)}off(n,a){this.ws.removeEventListener(n,a)}close(){this.ws.close()}}class nn{socket;buffer=[];constructor(n,a){this.socket=new fe(n,a),this.socket.on("message",t=>{this.buffer.push(JSON.parse(t.data)),this.socket.resolveHasUpdateHandlers()})}close(){this.socket.close()}async send(n){return this.socket.ws.readyState===WebSocket.CONNECTING&&await new Promise(a=>{this.socket.ws.addEventListener("open",a,{once:!0})}),this.socket.ws.send(JSON.stringify(n))}async next(){for await(const n of this)return n}async*[Symbol.asyncIterator](){for(;;)if(this.buffer.length>0)yield this.buffer.shift();else{if(this.socket.ws.readyState===WebSocket.CLOSED)return;await this.socket.hasUpdate()}}}class an{socket;buffer=[];constructor(n,a){this.socket=new fe(n,a),this.socket.on("message",t=>{this.buffer.push(JSON.parse(t.data)),this.socket.resolveHasUpdateHandlers()})}close(){this.socket.close()}async next(){for await(const n of this)return n}async*[Symbol.asyncIterator](){for(;;)if(this.buffer.length>0)yield this.buffer.shift();else{if(this.socket.ws.readyState===WebSocket.CLOSED)return;await this.socket.hasUpdate()}}}class rn{socket;responseValue;constructor(n,a){let t;this.responseValue=new Promise(s=>t=s),this.socket=new fe(n,a),this.socket.on("message",s=>{t(JSON.parse(s.data))})}async response(){return this.responseValue}close(){this.socket.close()}async send(n){return this.socket.ws.readyState===WebSocket.CONNECTING&&await new Promise(a=>{this.socket.ws.addEventListener("open",a,{once:!0})}),this.socket.ws.send(JSON.stringify(n))}}const sn=fetch.bind(void 0);class on{baseURL;fetcher;headers;requestInit;authGenerator;constructor(n,a){if(this.baseURL=n,this.headers={},typeof globalThis=="object"&&!("window"in globalThis)&&(this.headers["User-Agent"]="intellitask-yrr2-Generated-TS-Client (Encore/v1.46.12)"),this.requestInit=a.requestInit??{},a.fetcher!==void 0?this.fetcher=a.fetcher:this.fetcher=sn,a.auth!==void 0){const t=a.auth;typeof t=="function"?this.authGenerator=t:this.authGenerator=()=>t}}async getAuthData(){let n;if(this.authGenerator){const a=this.authGenerator();a instanceof Promise?n=await a:n=a}if(n){const a={};return a.headers=Fe({authorization:n.authorization}),a}}async createStreamInOut(n,a){let{query:t,headers:s}=a??{};const o=await this.getAuthData();o&&(o.query&&(t={...t,...o.query}),o.headers&&(s={...s,...o.headers}));const c=t?"?"+J(t):"";return new nn(this.baseURL+n+c,s)}async createStreamIn(n,a){let{query:t,headers:s}=a??{};const o=await this.getAuthData();o&&(o.query&&(t={...t,...o.query}),o.headers&&(s={...s,...o.headers}));const c=t?"?"+J(t):"";return new an(this.baseURL+n+c,s)}async createStreamOut(n,a){let{query:t,headers:s}=a??{};const o=await this.getAuthData();o&&(o.query&&(t={...t,...o.query}),o.headers&&(s={...s,...o.headers}));const c=t?"?"+J(t):"";return new rn(this.baseURL+n+c,s)}async callTypedAPI(n,a,t,s){return this.callAPI(n,a,t,{...s,headers:{"Content-Type":"application/json",...s?.headers}})}async callAPI(n,a,t,s){let{query:o,headers:c,...u}=s??{};const h={...this.requestInit,...u,method:n,body:t??null};h.headers={...this.headers,...h.headers,...c};const l=await this.getAuthData();l&&(l.query&&(o={...o,...l.query}),l.headers&&(h.headers={...h.headers,...l.headers}));const y=o?"?"+J(o):"",d=await this.fetcher(this.baseURL+a+y,h);if(!d.ok){let i={code:"unknown",message:`request failed: status ${d.status}`};try{const p=await d.text();try{const m=JSON.parse(p);cn(m)?i=m:i.message+=": "+JSON.stringify(m)}catch{i.message+=": "+p}}catch(p){i.message+=": "+String(p)}throw new K(d.status,i)}return d}}function cn(e){return e!=null&&ln(e.code)&&typeof e.message=="string"&&(e.details===void 0||e.details===null||typeof e.details=="object")}function ln(e){return e!==void 0&&Object.values(We).includes(e)}class K extends Error{status;code;details;constructor(n,a){super(a.message),Object.defineProperty(this,"name",{value:"APIError",enumerable:!1,configurable:!0}),Object.setPrototypeOf==null?this.__proto__=K.prototype:Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.status=n,this.code=a.code,this.details=a.details}}var We=(e=>(e.OK="ok",e.Canceled="canceled",e.Unknown="unknown",e.InvalidArgument="invalid_argument",e.DeadlineExceeded="deadline_exceeded",e.NotFound="not_found",e.AlreadyExists="already_exists",e.PermissionDenied="permission_denied",e.ResourceExhausted="resource_exhausted",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.Unimplemented="unimplemented",e.Internal="internal",e.Unavailable="unavailable",e.DataLoss="data_loss",e.Unauthenticated="unauthenticated",e))(We||{});const dn=e=>{const n=Be("staging");return new en(n)},un=()=>{const e=Be("staging");return St({baseURL:e,plugins:[kt(),Nt()]})},{useSession:hn,signIn:qn,signOut:zn,signUp:Vn}=un(),pn=Q("/_layout/chat/")({component:mn});function mn({className:e,...n}){hn().data?.session.token;const a=A(void 0),[t]=P(ye()),[s,o]=P(!0),[c,u]=P([]),[h,l]=P(""),y=async()=>{!a.current||s||(a.current.send({data:{chatroomId:"general",parentMessageId:null,senderId:t,content:h,attachments:[]},identifier:ye(),isLastChunk:!0,startIndex:0,totalChunks:1}).catch(console.error),console.log("sent message",h),l(""))};H(()=>{const i=async()=>{o(!0),a.current=await dn().chats.chat({userId:t,chatroomId:"general"}),a.current.socket.on("close",i),a.current.socket.on("open",()=>o(!1));for await(const p of a.current)console.log("received message",p),u(m=>[...m,p])};return i(),()=>{a.current?.socket.off("close",i),a.current?.close()}},[]);const d=v(Re,{value:h,onChange:i=>l(i.target.value),onSubmit:y,hasMessages:c.length>0,children:[r(Pe,{placeholder:"Type a message...",autoFocus:!0}),r(Ee,{})]});return c.length===0?r("div",{className:"flex-1 flex flex-col h-full justify-center",...n,children:r("div",{className:"px-2 py-4 max-w-4xl mx-auto w-full",children:d})}):v("div",{className:"flex-1 flex flex-col h-full overflow-y-auto",...n,children:[r(Ge,{scrollButtonAlignment:"center",className:"overflow-y-auto",children:r("div",{className:"max-w-4xl mx-auto w-full px-4 py-8 space-y-4",children:c.map(i=>i.data.senderId!==t?v(se,{id:i.data.id,children:[r($e,{}),r(oe,{content:i.data.content})]},i.data.id):r(se,{id:i.data.id,variant:"bubble",type:"outgoing",children:r(oe,{content:i.data.content})},i.data.id))})}),r("div",{className:"px-2 py-4 max-w-4xl mx-auto w-full overflow-y-hidden",children:d})]})}const fn=ke.update({id:"/login",path:"/login",getParentRoute:()=>ee}),qe=Ne.update({id:"/_layout",getParentRoute:()=>ee}),gn=Te.update({id:"/",path:"/",getParentRoute:()=>ee}),yn=pn.update({id:"/chat/",path:"/chat/",getParentRoute:()=>qe}),bn={LayoutChatIndexRoute:yn},vn=qe._addFileChildren(bn),wn={IndexRoute:gn,LayoutRoute:vn,LoginRoute:fn},xn=ee._addFileChildren(wn)._addFileTypes();function Cn(){return tt({routeTree:xn,defaultPreload:"intent",defaultErrorComponent:n=>r("p",{children:n.error.stack}),defaultNotFoundComponent:()=>r("p",{children:"not found"}),scrollRestoration:!0})}const Jn=Et({createRouter:Cn,getRouterManifest:Mt})(_t);export{W as B,qn as a,g as c,Jn as h,Vn as s,hn as u};
